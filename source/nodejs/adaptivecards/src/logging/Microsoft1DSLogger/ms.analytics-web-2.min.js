/*!
 * 1DS JS SDK Analytics Web, 2.0.1
 * Copyright (c) Microsoft and contributors. All rights reserved.
 * (Microsoft Internal Only)
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.oneDS=e.oneDS||{})}(this,function(e){"use strict";var h={Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5},l=(t.isNullOrUndefined=function(e){return null==e},t.disableCookies=function(){t._canUseCookies=!1},t.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(n,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},t);function t(){}var p,i,n=/[xy]/g,f=(r.prototype.addNotificationListener=function(e){this.listeners.push(e)},r.prototype.removeNotificationListener=function(e){for(var t=this.listeners.indexOf(e);-1<t;)this.listeners.splice(t,1),t=this.listeners.indexOf(e)},r.prototype.eventsSent=function(t){for(var i=this,e=function(e){n.listeners[e].eventsSent&&setTimeout(function(){return i.listeners[e].eventsSent(t)},0)},n=this,r=0;r<this.listeners.length;++r)e(r)},r.prototype.eventsDiscarded=function(t,i){for(var n=this,e=function(e){r.listeners[e].eventsDiscarded&&setTimeout(function(){return n.listeners[e].eventsDiscarded(t,i)},0)},r=this,o=0;o<this.listeners.length;++o)e(o)},r);function r(){this.listeners=[]}(i=p=p||{})[i.CRITICAL=1]="CRITICAL",i[i.WARNING=2]="WARNING";var o=0,a=1,s=2,c=3,u=4,g=5,d=6,m=8,v=9,_=10,y=11,w=23,b=25,S=27,x=29,T=30,C=31,I=32,N=35,k=36,E=37,P=38,D=39,A=45,M=49,U=52,O=56,R=57,L=61,V=62,B=63,q=64,z=66,F=68,Q=69,W=(G.sanitizeDiagnosticText=function(e){return'"'+e.replace(/\"/g,"")+'"'},G.dataType="MessageData",G.AiNonUserActionablePrefix="AI (Internal): ",G.AiUserActionablePrefix="AI: ",G);function G(e,t,i,n){void 0===i&&(i=!1),this.messageId=e,this.message=(i?G.AiUserActionablePrefix:G.AiNonUserActionablePrefix)+e;var r=(t?" message:"+G.sanitizeDiagnosticText(t):"")+(n?" props:"+G.sanitizeDiagnosticText(JSON.stringify(n)):"");this.message+=r}var H=(K.prototype.throwInternal=function(e,t,i,n,r){void 0===r&&(r=!1);var o=new W(t,i,r,n);if(this.enableDebugExceptions())throw o;if(void 0!==o&&o&&void 0!==o.message){if(r){var a=+o.messageId;(!this._messageLogged[a]||this.consoleLoggingLevel()>=p.WARNING)&&(this.warnToConsole(o.message),this._messageLogged[a]=!0)}else this.consoleLoggingLevel()>=p.WARNING&&this.warnToConsole(o.message);this.logInternalMessage(e,o)}},K.prototype.warnToConsole=function(e){"undefined"!=typeof console&&console&&("function"==typeof console.warn?console.warn(e):"function"==typeof console.log&&console.log(e))},K.prototype.resetInternalMessageCount=function(){this._messageCount=0,this._messageLogged={}},K.prototype.logInternalMessage=function(e,t){if(!this._areInternalMessagesThrottled()){var i=!0,n=this.AIInternalMessagePrefix+t.messageId;if(this._messageLogged[n]?i=!1:this._messageLogged[n]=!0,i&&(e<=this.telemetryLoggingLevel()&&(this.queue.push(t),this._messageCount++),this._messageCount==this.maxInternalMessageLimit())){var r="Internal events throttle limit per PageView reached for this app.",o=new W(w,r,!1);this.queue.push(o),this.warnToConsole(r)}}},K.prototype._areInternalMessagesThrottled=function(){return this._messageCount>=this.maxInternalMessageLimit()},K);function K(e){this.AIInternalMessagePrefix="AITR_",this.enableDebugExceptions=function(){return!1},this.consoleLoggingLevel=function(){return 1},this.telemetryLoggingLevel=function(){return 0},this.maxInternalMessageLimit=function(){return 25},this.queue=[],this._messageCount=0,this._messageLogged={},l.isNullOrUndefined(e)||(l.isNullOrUndefined(e.loggingLevelConsole)||(this.consoleLoggingLevel=function(){return e.loggingLevelConsole}),l.isNullOrUndefined(e.loggingLevelTelemetry)||(this.telemetryLoggingLevel=function(){return e.loggingLevelTelemetry}),l.isNullOrUndefined(e.maxMessageLimit)||(this.maxInternalMessageLimit=function(){return e.maxMessageLimit}),l.isNullOrUndefined(e.enableDebugExceptions)||(this.enableDebugExceptions=function(){return e.enableDebugExceptions}))}var j=(X.prototype.initialize=function(e,t){var i=this;if(this._isInitialized)throw Error("Core should not be initialized more than once");if(!e||l.isNullOrUndefined(e.instrumentationKey))throw Error("Please provide instrumentation key");if(this.config=e,this._notificationManager=new f,this.config.extensions=l.isNullOrUndefined(this.config.extensions)?[]:this.config.extensions,this.config.extensionConfig=l.isNullOrUndefined(this.config.extensionConfig)?{}:this.config.extensionConfig,this.config.extensionConfig.NotificationManager=this._notificationManager,this.logger=new H(e),t.forEach(function(e){if(l.isNullOrUndefined(e.initialize))throw Error(Z)}),0<this.config.extensions.length){var n=!0,r=!1;if(this.config.extensions.forEach(function(e){l.isNullOrUndefined(e)&&(n=!1),e.priority>ee&&(r=!0)}),!n)throw Error(Z);if(r)throw Error($)}(a=this._extensions).push.apply(a,[this._channelController].concat(t,this.config.extensions)),this._extensions=this._extensions.sort(function(e,t){var i=e,n=t,r=typeof i.processTelemetry,o=typeof n.processTelemetry;return"function"==r&&"function"==o?i.priority-n.priority:"function"==r&&"function"!=o?1:"function"!=r&&"function"==o?-1:void 0});var o={};this._extensions.forEach(function(e){var t=e;t&&t.priority&&(l.isNullOrUndefined(o[t.priority])?o[t.priority]=t.identifier:i.logger.warnToConsole("Two extensions have same priority"+o[t.priority]+", "+t.identifier))});for(var a,s=-1,c=0;c<this._extensions.length-1;c++){var u=this._extensions[c];if(!u||"function"==typeof u.processTelemetry){if(u.priority===ee){s=c+1;break}this._extensions[c].setNextPlugin(this._extensions[c+1])}}if(this._channelController.initialize(this.config,this,this._extensions),this._extensions.forEach(function(e){e&&e.priority<ee&&e.initialize(i.config,i,i._extensions)}),s<this._extensions.length&&this._extensions.splice(s),0===this.getTransmissionControls().length)throw new Error("No channels available");this._isInitialized=!0},X.prototype.getTransmissionControls=function(){return this._channelController.ChannelControls},X.prototype.track=function(e){if(null===e)throw this._notifiyInvalidEvent(e),Error("Invalid telemetry item");if(e.baseData&&!e.baseType)throw this._notifiyInvalidEvent(e),Error("Provide data.baseType for data.baseData");e.baseType||(e.baseType="EventData"),e.iKey||(e.iKey=this.config.instrumentationKey),e.time||(e.time=(new Date).toISOString()),l.isNullOrUndefined(e.ver)&&(e.ver="4.0"),this._validateTelmetryItem(e);for(var t=0;t<this._extensions.length;){if(this._extensions[t].processTelemetry){this._extensions[t].processTelemetry(e);break}t++}},X.prototype.addNotificationListener=function(e){this._notificationManager.addNotificationListener(e)},X.prototype.removeNotificationListener=function(e){this._notificationManager.removeNotificationListener(e)},X.prototype.pollInternalLogs=function(){var i=this,e=this.config.diagnosticLogInterval;return 0<e||(e=1e4),setInterval(function(){var e=i.logger.queue;e.forEach(function(e){var t={name:"InternalMessageId: "+e.messageId,iKey:i.config.instrumentationKey,time:(new Date).toISOString(),baseType:W.dataType,baseData:{message:e.message}};i.track(t)}),e.length=0},e)},X.prototype._validateTelmetryItem=function(e){if(l.isNullOrUndefined(e.name))throw this._notifiyInvalidEvent(e),Error("telemetry name required");if(l.isNullOrUndefined(e.time))throw this._notifiyInvalidEvent(e),Error("telemetry timestamp required");if(l.isNullOrUndefined(e.iKey))throw this._notifiyInvalidEvent(e),Error("telemetry instrumentationKey required")},X.prototype._notifiyInvalidEvent=function(e){this._notificationManager.eventsDiscarded([e],h.InvalidEvent)},X);function X(){this._isInitialized=!1,this._extensions=new Array,this._channelController=new J}var J=(Y.prototype.processTelemetry=function(t){this.channelQueue.forEach(function(e){0<e.length&&e[0].processTelemetry(t)})},Object.defineProperty(Y.prototype,"ChannelControls",{get:function(){return this.channelQueue},enumerable:!0,configurable:!0}),Y.prototype.initialize=function(i,n,r){var o=this;if(i.isCookieUseDisabled&&l.disableCookies(),this.channelQueue=new Array,i.channels){var a=void 0;i.channels.forEach(function(e){if(e&&0<e.length){if((e=e.sort(function(e,t){return e.priority-t.priority})).forEach(function(e){e.priority<ee&&(a=e.identifier),e.initialize(i,n,r)}),a)throw Error(te+a);for(var t=1;t<e.length;t++)e[t-1].setNextPlugin(e[t]);o.channelQueue.push(e)}})}for(var e=new Array,t=0;t<r.length;t++){var s=r[t];s.priority>ee&&e.push(s)}if(0<e.length){for((e=e.sort(function(e,t){return e.priority-t.priority})).forEach(function(e){return e.initialize(i,n,r)}),t=1;t<e.length;t++)e[t-1].setNextPlugin(e[t]);this.channelQueue.push(e)}},Y);function Y(){this.identifier="ChannelControllerPlugin",this.priority=ee}var Z="Extensions must provide callback to initialize",$="Channels must be provided through config.channels only",ee=500,te="Channel has invalid priority",ie={Normal:1,CostDeferred:2,RealTime:3},ne={Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,DateTime:8,Guid:9},re="2.0.1",oe="1DS-Web-JS-"+re,ae="undefined",se=null,ce=null,ue=Boolean("undefined"!=typeof document&&document.cookie)||Boolean("undefined"!=typeof navigator&&navigator.cookieEnabled);function le(e){return!(null==e||""===e)}function pe(e){return"string"==typeof e}function he(e){return"number"==typeof e}function fe(e){return"boolean"==typeof e}function ge(e){if(e){var t=e.indexOf("-");if(-1<t)return e.substring(0,t)}return""}function de(){return null===se&&(se=typeof navigator!==ae&&Boolean(navigator.sendBeacon)),se}function me(e){return!!(e&&he(e)&&1<=e&&e<=3)}function ve(e,t,i){if(!pe(e)||null==t||""===t)return null;if(pe(t)||he(t)||fe(t)||ye(t))t={value:t};else if("object"!=typeof t||t.value){if(void 0===t.value||null===t.value||""===t.value||!pe(t.value)&&!he(t.value)&&!fe(t.value)&&!ye(t.value))return null}else t={value:i?JSON.stringify(t):t};if(ye(t.value)&&!function(e){return 0<e.length}(t.value))return null;if(void 0!==t.kind){if(ye(t.value)||!function(e){if(e&&he(e)&&(0<=e&&e<=13||32===e))return!0;return!1}(t.kind))return null;t.value=t.value.toString()}return t}function _e(){return!(typeof navigator===ae||!navigator.product)&&"ReactNative"===navigator.product}function ye(e){return e instanceof Array}function we(e,t,i){var n=-1;return void 0===e?n:(t&&0<t&&(32===t?n=function(e){return e<<13}(1):t<=13&&(n=function(e){return e<<5}(t))),void 0!==i&&function(e){if(he(e)&&0<=e&&e<=9)return!0;return!1}(i)?(-1===n&&(n=0),n|i):(ye(e)&&(e=e[0]),-1!==n?n|function(e){if(void 0===e)return-1;{if(he(e))return ne.Double;if(pe(e))return ne.String;if(fe(e))return ne.Bool}return-1}(e):he(e)?ne.Double:n))}function be(){return ue}function Se(e,t,i){if(ue){var n=new Date;n.setTime(n.getTime()+24*i*60*60*1e3);var r="; expires="+n.toUTCString();window.document.cookie=e+"="+t+r+"; path=/;"}}function xe(e){Se(e,"",-1)}function Te(e){if(ue){e+="=";for(var t=decodeURIComponent(document.cookie).split(";"),i=0;i<t.length;i++){for(var n=t[i],r=0;" "===n.charAt(r);)r++;if(0===(n=n.substring(r)).indexOf(e))return n.substring(e.length,n.length)}}return""}function Ce(){return"xxxxxxxx-xxxx-4xxx-Rxxx-xxxxxxxxxxxx".replace(/x/g,function(){return Math.floor(16*Math.random()).toString(16)}).replace("R",(8|Math.floor(3*Math.random())).toString(16))}function Ie(e,t,i,n,r){var o={},a=!1,s=0,c=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(a=arguments[0],s++);for(var u=function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(a&&"[object Object]"===Object.prototype.toString.call(e[t])?o[t]=Ie(!0,o[t],e[t]):o[t]=e[t])};s<c;s++){u(arguments[s])}return o}function Ne(e){return e<10?"0"+e:e.toString()}var ke=Object.freeze({Version:re,StatsApiKey:"a387cfcf60114a43a7699f9fbb49289e-9bceb9fe-1c06-460f-96c5-6a0b247358bc-7238",FullVersionString:oe,Undefined:ae,isValueAssigned:le,isString:pe,isNumber:he,isBoolean:fe,getTenantId:ge,isBeaconsSupported:de,isUint8ArrayAvailable:function(){return null===ce&&(ce=typeof Uint8Array!==ae&&!function(){if(typeof navigator!==ae&&navigator.userAgent){var e=navigator.userAgent.toLowerCase();if((0<=e.indexOf("safari")||0<=e.indexOf("firefox"))&&e.indexOf("chrome")<0)return!0}return!1}()&&!_e()),ce},isLatency:me,sanitizeProperty:ve,getISOString:function(e){return e.getUTCFullYear()+"-"+Ne(e.getUTCMonth()+1)+"-"+Ne(e.getUTCDate())+"T"+Ne(e.getUTCHours())+":"+Ne(e.getUTCMinutes())+":"+Ne(e.getUTCSeconds())+"."+function(e){{if(e<10)return"00"+e;if(e<100)return"0"+e}return e.toString()}(e.getUTCMilliseconds())+"Z"},isReactNative:_e,isArray:ye,getCommonSchemaMetaData:we,cookieAvailable:be,setCookie:Se,deleteCookie:xe,getCookie:Te,createGuid:Ce,extend:Ie}),Ee=function(e,t){return(Ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};function Pe(e,t){function i(){this.constructor=e}Ee(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}var De,Ae=function(){return(Ae=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Me=(Pe(Ue,De=j),Ue.prototype.initialize=function(e,t){if(e){e.endpointUrl||(e.endpointUrl="https://browser.events.data.microsoft.com/OneCollector/1.0/");var i=e.propertyStorageOverride;if(i&&(!i.getProperty||!i.setProperty))throw"Invalid property storage override passed.";if(e.channels)for(var n=0;n<e.channels.length;n++)if(e.channels[n])for(var r=0;r<e.channels[n].length;r++){var o=e.channels[n][r];if(o.identifier&&o.version){var a=o.identifier+"="+o.version;this.pluginVersionStringArr.push(a)}}}if(this.getWParam=function(){return"undefined"!=typeof document?0:-1},t)for(n=0;n<t.length;n++){var s=t[n];s.identifier&&s.version&&(a=s.identifier+"="+s.version,this.pluginVersionStringArr.push(a))}this.pluginVersionString=this.pluginVersionStringArr.join(";");try{De.prototype.initialize.call(this,e,t)}catch(e){this.logger.warnToConsole("Channels must be provided through config.channels only")}},Ue.prototype.track=function(e){e&&(me(e.latency)||(e.latency=ie.Normal),e.baseData||(e.baseData={}),e.baseData.properties||(e.baseData.properties={}),e.baseData.properties.version||(e.baseData.properties.version=""),""!=this.pluginVersionString&&(e.baseData.properties.version=this.pluginVersionString)),De.prototype.track.call(this,e)},Ue);function Ue(){var e=null!==De&&De.apply(this,arguments)||this;return e.pluginVersionStringArr=[],e.pluginVersionString="",e}var Oe=(Object.defineProperty(Re.prototype,"expId",{get:function(){return this._propertiesConfig.expId?this._readExpIdFromCoreData(this._propertiesConfig.expId):this._readExpIdFromCookie()},enumerable:!0,configurable:!0}),Re.prototype._getMetaDataFromDOM=function(e){var t,i={};t="undefined"!=typeof document&&document.querySelectorAll("meta");for(var n=0;n<t.length;n++){var r=t[n];r.name&&0===r.name.toLowerCase().indexOf(e)&&(i[r.name.replace(e,"")]=r.content)}return i},Re.prototype._setAppExpId=function(e){if(e){if(e!==this.appExpId){this.appExpId=null;for(var t=e.split(","),i=0;i<t.length;i++)this._isValidAppFlightId(t[i])&&(this.appExpId?this.appExpId+=","+t[i]:this.appExpId=t[i])}}else this.appExpId=null},Re.prototype._getAppExpId=function(){return this.appExpId},Re.prototype._readExpIdFromCookie=function(){return this._setAppExpId(Te(this.expIdCookieName)),this._getAppExpId()},Re.prototype._readExpIdFromCoreData=function(e){return this._setAppExpId(e),this._getAppExpId()},Re.prototype._isValidAppFlightId=function(e){if(!e||e.length<4)return!1;for(var t=!1,i=e.substring(0,3).toString().toUpperCase(),n=0;n<this.flightIdNameSpaces.length;n++)if(this.flightIdNameSpaces[n]+":"===i&&e.length<=256){t=!0;break}return t},Re);function Re(e){if(this.appExpId=null,this.flightIdNameSpaces=["AX","EX","SF","CS","CF","CT","CU","DC","DF","H5","HL","WS","WP"],this.expIdCookieName="Treatments",this._propertiesConfig=e,"undefined"!=typeof document){var t=document.documentElement;t&&(this.locale=t.lang)}this.env=e.env?e.env:this._getMetaDataFromDOM("awa-").env}var Le=(Object.defineProperty(Ve.prototype,"localId",{get:function(){if(this._customLocalId)return this._customLocalId;var e=Te("MUID");e&&(this.localId="t:"+e)},set:function(e){this._customLocalId=e},enumerable:!0,configurable:!0}),Ve);function Ve(e){if(!e.disableCookiesUsage&&be()){var t=Te("MUID");t&&(this.localId="t:"+t)}if("undefined"!=typeof navigator){var i=navigator;this.locale=i.userLanguage||i.language}}var Be="MSIE",qe="Chrome",ze="Firefox",Fe="Safari",Qe="Edge",We="Electron",Ge="SkypeShell",He="PhantomJS",Ke="Opera",je="([\\d,.]+)",Xe="Unknown",Je=(Object.defineProperty(Ye.prototype,"userConsent",{get:function(){return this._propertiesConfig.userConsented||!!Te(this._propertiesConfig.userConsentCookieName)},enumerable:!0,configurable:!0}),Ye.prototype._getBrowserName=function(e){return this._userAgentContainsString("OPR/",e)?Ke:this._userAgentContainsString(He,e)?He:this._userAgentContainsString(Qe,e)?Qe:this._userAgentContainsString(We,e)?We:this._userAgentContainsString(qe,e)?qe:this._userAgentContainsString("Trident",e)?Be:this._userAgentContainsString(ze,e)?ze:this._userAgentContainsString(Fe,e)?Fe:this._userAgentContainsString(Ge,e)?Ge:Xe},Ye.prototype._userAgentContainsString=function(e,t){return-1<t.indexOf(e)},Ye.prototype._getBrowserVersion=function(e,t){return t===Be?this._getIeVersion(e):this._getOtherVersion(t,e)},Ye.prototype._getIeVersion=function(e){var t=e.match(new RegExp(Be+" "+je));if(t)return t[1];var i=e.match(new RegExp("rv:"+je));return i?i[1]:void 0},Ye.prototype._getOtherVersion=function(e,t){e===Fe&&(e="Version");var i=t.match(new RegExp(e+"/"+je));return i?i[1]:Xe},Ye.prototype._getScreenResolution=function(){var e={h:0,w:0};return window.screen&&(e.h=screen.height,e.w=screen.width),e},Ye);function Ye(e){if(this._propertiesConfig=e,"undefined"!=typeof window){var t=window.location;if(t){var i=t.hostname;i&&(this.domain="file:"===t.protocol?"local":i)}}var n="undefined"!=typeof navigator?navigator.userAgent:"";if(e.userAgent&&(n=e.userAgent),e.populateBrowserInfo){if(n){var r=this._getBrowserName(n);this.browser=r,this.browserVer=this._getBrowserVersion(n,r)}var o=this._getScreenResolution();this.screenRes=o.w+"X"+o.h}}var Ze="Windows",$e="Mac OS X",et="Android",tt=/(windows|win32)/i,it=/ arm;/i,nt=/windows\sphone\s\d+\.\d+/i,rt=/(macintosh|mac os x)/i,ot=/(ipad|iphone|ipod)(?=.*like mac os x)/i,at=/(linux|joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk)/i,st=/android/i,ct=/CrOS/i,ut={5.1:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1","10.0":"10"},lt="Unknown",pt=(ht.prototype._getOsName=function(e){return e.match(nt)?"Windows Phone":e.match(it)?"Windows RT":e.match(tt)?Ze:e.match(ot)?"iOS":e.match(st)?et:e.match(at)?"Linux":-1!==e.indexOf("x11")?"Unix":-1!==e.indexOf("blackberry")?"BlackBerry":-1!==e.indexOf("symbian")?"Symbian":-1!==e.indexOf("nokia")?"Nokia":e.match(rt)?$e:e.match(ct)?"Chrome OS":lt},ht.prototype._getOsVersion=function(e,t){return t===Ze?this._getGenericOsVersion(e,"Windows NT"):t===et?this._getGenericOsVersion(e,t):t===$e?this._getMacOsxVersion(e):lt},ht.prototype._getGenericOsVersion=function(e,t){var i=e.match(new RegExp(t+" ([\\d,.]+)"));return i?ut[i[1]]?ut[i[1]]:i[1]:lt},ht.prototype._getMacOsxVersion=function(e){var t=e.match(new RegExp($e+" ([\\d,_,.]+)"));if(t){var i=t[1].replace(/_/g,".");if(i){var n=this._getDelimiter(i);return n?i.split(n)[0]:i}}return lt},ht.prototype._getDelimiter=function(e){return-1<e.indexOf(".")?".":-1<e.indexOf("_")?"_":null},ht);function ht(e){var t="undefined"!=typeof navigator?navigator.userAgent:"";if(e.userAgent&&(t=e.userAgent),t&&e.populateOperatingSystemInfo){var i=this._getOsName(t.toLowerCase());this.name=i,this.ver=this._getOsVersion(t,i)}}var ft=(Object.defineProperty(gt.prototype,"msfpc",{get:function(){return Te("MSFPC")},enumerable:!0,configurable:!0}),Object.defineProperty(gt.prototype,"anid",{get:function(){return Te("ANON").slice(0,34)},enumerable:!0,configurable:!0}),gt);function gt(e){this.serviceName=e.serviceName?e.serviceName:""}var dt=function(){this.popSample=100},mt=function(){var e=(new Date).getTimezoneOffset(),t=e%60,i=(e-t)/60,n="+";0<i&&(n="-"),i=Math.abs(i),t=Math.abs(t),this.tz=n+(i<10?"0"+i:i.toString())+":"+(t<10?"0"+t:t.toString())},vt=function(){},_t=(yt.id="id",yt.ver="ver",yt.appName="name",yt.locale="locale",yt.expId="expId",yt.env="env",yt);function yt(){}var wt=(bt.domain="domain",bt.browser="browser",bt.browserVer="browserVer",bt.screenRes="screenRes",bt.userConsent="userConsent",bt);function bt(){}var St=(xt.locale="locale",xt.localId="localId",xt);function xt(){}var Tt=(Ct.osName="name",Ct.ver="ver",Ct);function Ct(){}var It=(Nt.ver="ver",Nt.seq="seq",Nt.installId="installId",Nt);function Nt(){}var kt=(Et.msfpc="msfpc",Et.anid="anid",Et.serviceName="serviceName",Et);function Et(){}var Pt=(Dt.popSample="popSample",Dt);function Dt(){}var At=(Mt.tz="tz",Mt);function Mt(){}var Ut=(Ot.sessionId="sesId",Ot);function Ot(){}var Rt=(Lt.localId="localId",Lt.deviceClass="deviceClass",Lt.make="make",Lt.model="model",Lt);function Lt(){}var Vt=(Bt.UserExt="user",Bt.DeviceExt="device",Bt.TraceExt="trace",Bt.WebExt="web",Bt.AppExt="app",Bt.OSExt="os",Bt.SdkExt="sdk",Bt.IntWebExt="intweb",Bt.UtcExt="utc",Bt.LocExt="loc",Bt);function Bt(){}var qt,zt,Ft,Qt,Wt="MicrosoftApplicationsTelemetryDeviceId",Gt=(Ht.prototype.getSequenceId=function(){return++this._sequenceId},Ht.prototype._saveData=function(e,t){this._propertyStorage?this._propertyStorage.setProperty(e,t):Se(e,t,365)},Ht.prototype._getData=function(e){return this._propertyStorage?this._propertyStorage.getProperty(e)||"":Te(e)},Ht);function Ht(e){if(this._sequenceId=0,this._propertyStorage=e.propertyStorageOverride,this.seq=this._sequenceId,this.ver=oe,!e.disableCookiesUsage&&be()||this._propertyStorage){var t=this._getData(Wt);t=t||l.newGuid(),this._saveData(Wt,t),this.installId=t}else xe(Wt)}(zt=qt=qt||{})[zt.LocalStorage=0]="LocalStorage",zt[zt.SessionStorage=1]="SessionStorage",(Qt=Ft=Ft||{})[Qt.Default=0]="Default",Qt[Qt.Required=1]="Required",Qt[Qt.Array=2]="Array",Qt[Qt.Hidden=4]="Hidden";var Kt=(jt.sanitizeKeyAndAddUniqueness=function(e,t,i){var n=t.length,r=jt.sanitizeKey(e,t);if(r.length!==n){for(var o=0,a=r;void 0!==i[a];)o++,a=r.substring(0,jt.MAX_NAME_LENGTH-3)+jt.padNumber(o);r=a}return r},jt.sanitizeKey=function(e,t){var i;return t&&(t=jt.trim(t.toString())).length>jt.MAX_NAME_LENGTH&&(i=t.substring(0,jt.MAX_NAME_LENGTH),e.throwInternal(p.WARNING,R,"name is too long.  It has been truncated to "+jt.MAX_NAME_LENGTH+" characters.",{name:t},!0)),i||t},jt.sanitizeString=function(e,t,i){var n;return void 0===i&&(i=jt.MAX_STRING_LENGTH),t&&(i=i||jt.MAX_STRING_LENGTH,(t=jt.trim(t)).toString().length>i&&(n=t.toString().substring(0,i),e.throwInternal(p.WARNING,L,"string value is too long. It has been truncated to "+i+" characters.",{value:t},!0))),n||t},jt.sanitizeUrl=function(e,t){return jt.sanitizeInput(e,t,jt.MAX_URL_LENGTH,z)},jt.sanitizeMessage=function(e,t){var i;return t&&t.length>jt.MAX_MESSAGE_LENGTH&&(i=t.substring(0,jt.MAX_MESSAGE_LENGTH),e.throwInternal(p.WARNING,O,"message is too long, it has been truncated to "+jt.MAX_MESSAGE_LENGTH+" characters.",{message:t},!0)),i||t},jt.sanitizeException=function(e,t){var i;return t&&t.length>jt.MAX_EXCEPTION_LENGTH&&(i=t.substring(0,jt.MAX_EXCEPTION_LENGTH),e.throwInternal(p.WARNING,U,"exception is too long, it has been truncated to "+jt.MAX_EXCEPTION_LENGTH+" characters.",{exception:t},!0)),i||t},jt.sanitizeProperties=function(t,e){if(e){var i={};for(var n in e){var r=e[n];if("object"==typeof r&&"undefined"!=typeof JSON)try{r=JSON.stringify(r)}catch(e){t.throwInternal(p.WARNING,M,"custom property is not valid",{exception:e},!0)}r=jt.sanitizeString(t,r,jt.MAX_PROPERTY_LENGTH),i[n=jt.sanitizeKeyAndAddUniqueness(t,n,i)]=r}e=i}return e},jt.sanitizeMeasurements=function(e,t){if(t){var i={};for(var n in t){var r=t[n];i[n=jt.sanitizeKeyAndAddUniqueness(e,n,i)]=r}t=i}return t},jt.sanitizeId=function(e,t){return t?jt.sanitizeInput(e,t,jt.MAX_ID_LENGTH,Q).toString():t},jt.sanitizeInput=function(e,t,i,n){var r;return t&&(t=jt.trim(t)).length>i&&(r=t.substring(0,i),e.throwInternal(p.WARNING,n,"input is too long, it has been truncated to "+i+" characters.",{data:t},!0)),r||t},jt.padNumber=function(e){var t="00"+e;return t.substr(t.length-3)},jt.trim=function(e){return"string"!=typeof e?e:e.replace(/^\s+|\s+$/g,"")},jt.MAX_NAME_LENGTH=150,jt.MAX_ID_LENGTH=128,jt.MAX_PROPERTY_LENGTH=8192,jt.MAX_STRING_LENGTH=1024,jt.MAX_URL_LENGTH=2048,jt.MAX_MESSAGE_LENGTH=32768,jt.MAX_EXCEPTION_LENGTH=32768,jt);function jt(){}var Xt=(Jt.disableStorage=function(){Jt._canUseLocalStorage=!1,Jt._canUseSessionStorage=!1},Jt._getLocalStorageObject=function(){return Jt.canUseLocalStorage()?Jt._getVerifiedStorageObject(qt.LocalStorage):null},Jt._getVerifiedStorageObject=function(e){var t,i,n=null;try{if("undefined"==typeof window)return null;i=new Date,(n=e===qt.LocalStorage?window.localStorage:window.sessionStorage).setItem(i,i),t=n.getItem(i)!=i,n.removeItem(i),t&&(n=null)}catch(e){n=null}return n},Jt.isInternalApplicationInsightsEndpoint=function(e){return-1!==Jt._internalEndpoints.indexOf(e.toLowerCase())},Jt.canUseLocalStorage=function(){return void 0===Jt._canUseLocalStorage&&(Jt._canUseLocalStorage=!!Jt._getVerifiedStorageObject(qt.LocalStorage)),Jt._canUseLocalStorage},Jt.getStorage=function(t,e){var i=Jt._getLocalStorageObject();if(null!==i)try{return i.getItem(e)}catch(e){Jt._canUseLocalStorage=!1,t.throwInternal(p.WARNING,a,"Browser failed read of local storage. "+Jt.getExceptionName(e),{exception:Jt.dump(e)})}return null},Jt.setStorage=function(t,e,i){var n=Jt._getLocalStorageObject();if(null!==n)try{return n.setItem(e,i),!0}catch(e){Jt._canUseLocalStorage=!1,t.throwInternal(p.WARNING,c,"Browser failed write to local storage. "+Jt.getExceptionName(e),{exception:Jt.dump(e)})}return!1},Jt.removeStorage=function(t,e){var i=Jt._getLocalStorageObject();if(null!==i)try{return i.removeItem(e),!0}catch(e){Jt._canUseLocalStorage=!1,t.throwInternal(p.WARNING,g,"Browser failed removal of local storage item. "+Jt.getExceptionName(e),{exception:Jt.dump(e)})}return!1},Jt._getSessionStorageObject=function(){return Jt.canUseSessionStorage()?Jt._getVerifiedStorageObject(qt.SessionStorage):null},Jt.canUseSessionStorage=function(){return void 0===Jt._canUseSessionStorage&&(Jt._canUseSessionStorage=!!Jt._getVerifiedStorageObject(qt.SessionStorage)),Jt._canUseSessionStorage},Jt.getSessionStorageKeys=function(){var e=[];if(Jt.canUseSessionStorage())for(var t in window.sessionStorage)e.push(t);return e},Jt.getSessionStorage=function(t,e){var i=Jt._getSessionStorageObject();if(null!==i)try{return i.getItem(e)}catch(e){Jt._canUseSessionStorage=!1,t.throwInternal(p.WARNING,s,"Browser failed read of session storage. "+Jt.getExceptionName(e),{exception:Jt.dump(e)})}return null},Jt.setSessionStorage=function(t,e,i){var n=Jt._getSessionStorageObject();if(null!==n)try{return n.setItem(e,i),!0}catch(e){Jt._canUseSessionStorage=!1,t.throwInternal(p.WARNING,u,"Browser failed write to session storage. "+Jt.getExceptionName(e),{exception:Jt.dump(e)})}return!1},Jt.removeSessionStorage=function(t,e){var i=Jt._getSessionStorageObject();if(null!==i)try{return i.removeItem(e),!0}catch(e){Jt._canUseSessionStorage=!1,t.throwInternal(p.WARNING,d,"Browser failed removal of session storage item. "+Jt.getExceptionName(e),{exception:Jt.dump(e)})}return!1},Jt.disableCookies=function(){l.disableCookies()},Jt.canUseCookies=function(t){if(void 0===l._canUseCookies){l._canUseCookies=!1;try{l._canUseCookies=void 0!==Jt.document.cookie}catch(e){t.throwInternal(p.WARNING,F,"Cannot access document.cookie - "+Jt.getExceptionName(e),{exception:Jt.dump(e)})}}return l._canUseCookies},Jt.setCookie=function(e,t,i,n){var r="",o="";n&&(r=";domain="+n),Jt.document.location&&"https:"===Jt.document.location.protocol&&(o=";secure"),Jt.canUseCookies(e)&&(Jt.document.cookie=t+"="+i+r+";path=/"+o)},Jt.stringToBoolOrDefault=function(e,t){return void 0===t&&(t=!1),null==e?t:"true"===e.toString().toLowerCase()},Jt.getCookie=function(e,t){if(Jt.canUseCookies(e)){var i="";if(t&&t.length)for(var n=t+"=",r=Jt.document.cookie.split(";"),o=0;o<r.length;o++){var a=r[o];if((a=Jt.trim(a))&&0===a.indexOf(n)){i=a.substring(n.length,r[o].length);break}}return i}},Jt.deleteCookie=function(e,t){Jt.canUseCookies(e)&&(Jt.document.cookie=t+"=;path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT;")},Jt.trim=function(e){return"string"!=typeof e?e:e.replace(/^\s+|\s+$/g,"")},Jt.newId=function(){for(var e="",t=1073741824*Math.random();0<t;)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t%64),t=Math.floor(t/64);return e},Jt.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},Jt.isError=function(e){return"[object Error]"===Object.prototype.toString.call(e)},Jt.isDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)},Jt.toISOStringForIE8=function(e){if(Jt.isDate(e)){if(Date.prototype.toISOString)return e.toISOString();var t=function(e){var t=String(e);return 1===t.length&&(t="0"+t),t};return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}},Jt.getIEVersion=function(e){void 0===e&&(e=null);var t=e?e.toLowerCase():navigator.userAgent.toLowerCase();return-1!=t.indexOf("msie")?parseInt(t.split("msie")[1]):null},Jt.msToTimeSpan=function(e){(isNaN(e)||e<0)&&(e=0);var t=""+(e=Math.round(e))%1e3,i=""+Math.floor(e/1e3)%60,n=""+Math.floor(e/6e4)%60,r=""+Math.floor(e/36e5)%24,o=Math.floor(e/864e5);return t=1===t.length?"00"+t:2===t.length?"0"+t:t,i=i.length<2?"0"+i:i,n=n.length<2?"0"+n:n,(0<o?o+".":"")+(r=r.length<2?"0"+r:r)+":"+n+":"+i+"."+t},Jt.isCrossOriginError=function(e,t,i,n,r){return("Script error."===e||"Script error"===e)&&!r},Jt.dump=function(e){var t=Object.prototype.toString.call(e),i=JSON.stringify(e);return"[object Error]"===t&&(i="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'"),t+i},Jt.getExceptionName=function(e){return"[object Error]"===Object.prototype.toString.call(e)?e.name:""},Jt.addEventHandler=function(e,t){if("undefined"==typeof window||!window||"string"!=typeof e||"function"!=typeof t)return!1;var i="on"+e;if(window.addEventListener)window.addEventListener(e,t,!1);else{if(!window.attachEvent)return!1;window.attachEvent(i,t)}return!0},Jt.IsBeaconApiSupported=function(){return"sendBeacon"in navigator&&navigator.sendBeacon},Jt.getExtension=function(e,t){for(var i=null,n=0;!i&&n<e.length;)e[n]&&e[n].identifier===t&&(i=e[n]),n++;return i},Jt.document="undefined"!=typeof document?document:{},Jt._canUseLocalStorage=void 0,Jt._canUseSessionStorage=void 0,Jt._internalEndpoints=["https://dc.services.visualstudio.com/v2/track","https://breeze.aimon.applicationinsights.io/v2/track","https://dc-int.services.visualstudio.com/v2/track"],Jt.NotSpecified="not_specified",Jt);function Jt(){}var Yt=(Zt.parseUrl=function(e){return Zt.htmlAnchorElement||(Zt.htmlAnchorElement=Zt.document.createElement?Zt.document.createElement("a"):{host:Zt.parseHost(e)}),Zt.htmlAnchorElement.href=e,Zt.htmlAnchorElement},Zt.getAbsoluteUrl=function(e){var t,i=Zt.parseUrl(e);return i&&(t=i.href),t},Zt.getPathName=function(e){var t,i=Zt.parseUrl(e);return i&&(t=i.pathname),t},Zt.getCompleteUrl=function(e,t){return e?e.toUpperCase()+" "+t:t},Zt.parseHost=function(e){var t=e.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i);return null!=t&&2<t.length&&"string"==typeof t[2]&&0<t[2].length?t[2]:null},Zt.document="undefined"!=typeof document?document:{},Zt);function Zt(){}var $t=(ei.ParseDependencyPath=function(e,t,i,n){var r,o=n,a=n;if(t&&0<t.length){var s=Yt.parseUrl(t);if(r=s.host,!o)if(null!=s.pathname){var c=0===s.pathname.length?"/":s.pathname;"/"!==c.charAt(0)&&(c="/"+c),a=s.pathname,o=Kt.sanitizeString(e,i?i+" "+c:c)}else o=Kt.sanitizeString(e,t)}else o=r=n;return{target:r,name:o,data:a}},ei);function ei(){}var ti=(ii.Now="undefined"==typeof window?function(){return(new Date).getTime()}:window.performance&&window.performance.now&&window.performance.timing?function(){return window.performance.now()+window.performance.timing.navigationStart}:function(){return(new Date).getTime()},ii.GetDuration=function(e,t){var i=null;return 0===e||0===t||l.isNullOrUndefined(e)||l.isNullOrUndefined(t)||(i=t-e),i},ii);function ii(){}var ni,ri="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",oi=(Pe(ai,ni=function(){}),ai);function ai(){return ni.call(this)||this}var si;Pe(ci,si=function(){this.ver=1,this.sampleRate=100,this.tags={}});function ci(e,t,i){var n=si.call(this)||this;return n.name=Kt.sanitizeString(e,i)||Xt.NotSpecified,n.data=t,n.time=Xt.toISOStringForIE8(new Date),n.aiDataContract={time:Ft.Required,iKey:Ft.Required,name:Ft.Required,sampleRate:function(){return 100==n.sampleRate?Ft.Hidden:Ft.Required},tags:Ft.Required,data:Ft.Required},n}function ui(){}var li,pi=(Pe(hi,li=ui),hi);function hi(){var e=li.call(this)||this;return e.ver=2,e.properties={},e.measurements={},e}var fi,gi=(Pe(di,fi=pi),di.envelopeType="Microsoft.ApplicationInsights.{0}.Event",di.dataType="EventData",di);function di(e,t,i,n){var r=fi.call(this)||this;return r.aiDataContract={ver:Ft.Required,name:Ft.Required,properties:Ft.Default,measurements:Ft.Default},r.name=Kt.sanitizeString(e,t)||Xt.NotSpecified,r.properties=Kt.sanitizeProperties(e,i),r.measurements=Kt.sanitizeMeasurements(e,n),r}function mi(){}var vi,_i=(Pe(yi,vi=ui),yi);function yi(){var e=vi.call(this)||this;return e.ver=2,e.exceptions=[],e.properties={},e.measurements={},e}function wi(){this.hasFullStack=!0,this.parsedStack=[]}var bi,Si=(Pe(xi,bi=_i),xi.CreateFromInterface=function(t,e){var i=e.exceptions&&e.exceptions.map(function(e){return Ci.CreateFromInterface(t,e)});return new xi(t,Ae({},e,{exceptions:i}))},xi.prototype.toInterface=function(){var e=this,t=e.exceptions,i=e.properties,n=e.measurements,r=e.severityLevel,o=e.ver,a=e.problemGroup,s=e.id,c=e.isManual;return{ver:o,exceptions:t instanceof Array&&t.map(function(e){return e.toInterface()})||void 0,severityLevel:r,properties:i,measurements:n,problemGroup:a,id:s,isManual:c}},xi.CreateSimpleException=function(e,t,i,n,r,o){return{exceptions:[{hasFullStack:!0,message:e,stack:r,typeName:t}]}},xi.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",xi.dataType="ExceptionData",xi);function xi(e,t,i,n,r,o){var a=bi.call(this)||this;return a.aiDataContract={ver:Ft.Required,exceptions:Ft.Required,severityLevel:Ft.Default,properties:Ft.Default,measurements:Ft.Default},t instanceof Error?(a.exceptions=[new Ci(e,t)],a.properties=Kt.sanitizeProperties(e,i),a.measurements=Kt.sanitizeMeasurements(e,n),r&&(a.severityLevel=r),o&&(a.id=o)):(a.exceptions=t.exceptions,a.properties=t.properties,a.measurements=t.measurements,t.severityLevel&&(a.severityLevel=t.severityLevel),t.id&&(a.id=t.id),t.problemGroup&&(a.problemGroup=t.problemGroup),l.isNullOrUndefined(t.ver)||(a.ver=t.ver),l.isNullOrUndefined(t.isManual)||(a.isManual=t.isManual)),a}var Ti,Ci=(Pe(Ii,Ti=wi),Ii.prototype.toInterface=function(){var e=this.parsedStack instanceof Array&&this.parsedStack.map(function(e){return e.toInterface()});return{id:this.id,outerId:this.outerId,typeName:this.typeName,message:this.message,hasFullStack:this.hasFullStack,stack:this.stack,parsedStack:e||void 0}},Ii.CreateFromInterface=function(e,t){var i=t.parsedStack instanceof Array&&t.parsedStack.map(function(e){return ki.CreateFromInterface(e)})||t.parsedStack;return new Ii(e,Ae({},t,{parsedStack:i}))},Ii.parseStack=function(e){var t=void 0;if("string"==typeof e){var i=e.split("\n");t=[];for(var n=0,r=0,o=0;o<=i.length;o++){var a=i[o];if(ki.regex.test(a)){var s=new ki(i[o],n++);r+=s.sizeInBytes,t.push(s)}}if(32768<r)for(var c=0,u=t.length-1,l=0,p=c,h=u;c<u;){if(32768<(l+=t[c].sizeInBytes+t[u].sizeInBytes)){var f=h-p+1;t.splice(p,f);break}p=c,h=u,c++,u--}}return t},Ii);function Ii(e,t){var i=Ti.call(this)||this;if(i.aiDataContract={id:Ft.Default,outerId:Ft.Default,typeName:Ft.Required,message:Ft.Required,hasFullStack:Ft.Default,stack:Ft.Default,parsedStack:Ft.Array},t instanceof Error){i.typeName=Kt.sanitizeString(e,t.name)||Xt.NotSpecified,i.message=Kt.sanitizeMessage(e,t.message)||Xt.NotSpecified;var n=t.stack;i.parsedStack=Ii.parseStack(n),i.stack=Kt.sanitizeException(e,n),i.hasFullStack=Xt.isArray(i.parsedStack)&&0<i.parsedStack.length}else i.typeName=t.typeName,i.message=t.message,i.stack=t.stack,i.parsedStack=t.parsedStack,i.hasFullStack=t.hasFullStack;return i}var Ni,ki=(Pe(Ei,Ni=mi),Ei.CreateFromInterface=function(e){return new Ei(e,null)},Ei.prototype.toInterface=function(){return{level:this.level,method:this.method,assembly:this.assembly,fileName:this.fileName,line:this.line}},Ei.regex=/^([\s]+at)?(.*?)(\@|\s\(|\s)([^\(\@\n]+):([0-9]+):([0-9]+)(\)?)$/,Ei.baseSize=58,Ei);function Ei(e,t){var i=Ni.call(this)||this;if(i.sizeInBytes=0,i.aiDataContract={level:Ft.Required,method:Ft.Required,assembly:Ft.Default,fileName:Ft.Default,line:Ft.Default},"string"==typeof e){var n=e;i.level=t,i.method="<no_method>",i.assembly=Xt.trim(n),i.fileName="",i.line=0;var r=n.match(Ei.regex);r&&5<=r.length&&(i.method=Xt.trim(r[2])||i.method,i.fileName=Xt.trim(r[4]),i.line=parseInt(r[5])||0)}else i.level=e.level,i.method=e.method,i.assembly=e.assembly,i.fileName=e.fileName,i.line=e.line,i.sizeInBytes=0;return i.sizeInBytes+=i.method.length,i.sizeInBytes+=i.fileName.length,i.sizeInBytes+=i.assembly.length,i.sizeInBytes+=Ei.baseSize,i.sizeInBytes+=i.level.toString().length,i.sizeInBytes+=i.line.toString().length,i}var Pi,Di,Ai,Mi=(Pe(Ui,Pi=ui),Ui);function Ui(){var e=Pi.call(this)||this;return e.ver=2,e.metrics=[],e.properties={},e}(Ai=Di=Di||{})[Ai.Measurement=0]="Measurement",Ai[Ai.Aggregation=1]="Aggregation";var Oi,Ri=(Pe(Li,Oi=function(){this.kind=Di.Measurement}),Li);function Li(){var e=null!==Oi&&Oi.apply(this,arguments)||this;return e.aiDataContract={name:Ft.Required,kind:Ft.Default,value:Ft.Required,count:Ft.Default,min:Ft.Default,max:Ft.Default,stdDev:Ft.Default},e}var Vi,Bi=(Pe(qi,Vi=Mi),qi.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",qi.dataType="MetricData",qi);function qi(e,t,i,n,r,o,a){var s=Vi.call(this)||this;s.aiDataContract={ver:Ft.Required,metrics:Ft.Required,properties:Ft.Default};var c=new Ri;return c.count=0<n?n:void 0,c.max=isNaN(o)||null===o?void 0:o,c.min=isNaN(r)||null===r?void 0:r,c.name=Kt.sanitizeString(e,t)||Xt.NotSpecified,c.value=i,s.metrics=[c],s.properties=Kt.sanitizeProperties(e,a),s}var zi,Fi=(Pe(Qi,zi=pi),Qi);function Qi(){var e=zi.call(this)||this;return e.ver=2,e.properties={},e.measurements={},e}var Wi,Gi=(Pe(Hi,Wi=Fi),Hi.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",Hi.dataType="PageviewData",Hi);function Hi(e,t,i,n,r,o,a){var s=Wi.call(this)||this;return s.aiDataContract={ver:Ft.Required,name:Ft.Default,url:Ft.Default,duration:Ft.Default,properties:Ft.Default,measurements:Ft.Default,id:Ft.Default},s.id=Kt.sanitizeId(e,a),s.url=Kt.sanitizeUrl(e,i),s.name=Kt.sanitizeString(e,t)||Xt.NotSpecified,isNaN(n)||(s.duration=Xt.msToTimeSpan(n)),s.properties=Kt.sanitizeProperties(e,r),s.measurements=Kt.sanitizeMeasurements(e,o),s}var Ki,ji=(Pe(Xi,Ki=ui),Xi);function Xi(){var e=Ki.call(this)||this;return e.ver=2,e.success=!0,e.properties={},e.measurements={},e}var Ji,Yi=(Pe(Zi,Ji=ji),Zi.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",Zi.dataType="RemoteDependencyData",Zi);function Zi(e,t,i,n,r,o,a,s,c,u,l){void 0===c&&(c="Ajax");var p=Ji.call(this)||this;p.aiDataContract={id:Ft.Required,ver:Ft.Required,name:Ft.Default,resultCode:Ft.Default,duration:Ft.Default,success:Ft.Default,data:Ft.Default,target:Ft.Default,type:Ft.Default,properties:Ft.Default,measurements:Ft.Default,kind:Ft.Default,value:Ft.Default,count:Ft.Default,min:Ft.Default,max:Ft.Default,stdDev:Ft.Default,dependencyKind:Ft.Default,dependencySource:Ft.Default,commandName:Ft.Default,dependencyTypeName:Ft.Default},p.id=t,p.duration=Xt.msToTimeSpan(r),p.success=o,p.resultCode=a+"",p.type=Kt.sanitizeString(e,c);var h=$t.ParseDependencyPath(e,i,s,n);return p.data=Kt.sanitizeUrl(e,n)||h.data,p.target=h.target,p.name=h.name,p.properties=Kt.sanitizeProperties(e,u),p.measurements=Kt.sanitizeMeasurements(e,l),p}var $i,en=(Pe(tn,$i=ui),tn);function tn(){var e=$i.call(this)||this;return e.ver=2,e.properties={},e}var nn,rn=(Pe(on,nn=en),on.envelopeType="Microsoft.ApplicationInsights.{0}.Message",on.dataType="MessageData",on);function on(e,t,i,n){var r=nn.call(this)||this;return r.aiDataContract={ver:Ft.Required,message:Ft.Required,severityLevel:Ft.Default,properties:Ft.Default},t=t||Xt.NotSpecified,r.message=Kt.sanitizeMessage(e,t),r.properties=Kt.sanitizeProperties(e,n),i&&(r.severityLevel=i),r}var an,sn=(Pe(cn,an=Fi),cn);function cn(){var e=an.call(this)||this;return e.ver=2,e.properties={},e.measurements={},e}var un,ln=(Pe(pn,un=sn),pn.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",pn.dataType="PageviewPerformanceData",pn);function pn(e,t,i,n,r,o,a){var s=un.call(this)||this;return s.aiDataContract={ver:Ft.Required,name:Ft.Default,url:Ft.Default,duration:Ft.Default,perfTotal:Ft.Default,networkConnect:Ft.Default,sentRequest:Ft.Default,receivedResponse:Ft.Default,domProcessing:Ft.Default,properties:Ft.Default,measurements:Ft.Default},s.url=Kt.sanitizeUrl(e,i),s.name=Kt.sanitizeString(e,t)||Xt.NotSpecified,s.properties=Kt.sanitizeProperties(e,r),s.measurements=Kt.sanitizeMeasurements(e,o),a&&(s.domProcessing=a.domProcessing,s.duration=a.duration,s.networkConnect=a.networkConnect,s.perfTotal=a.perfTotal,s.receivedResponse=a.receivedResponse,s.sentRequest=a.sentRequest),s}var hn,fn,gn;Pe(dn,hn=oi);function dn(e,t){var i=hn.call(this)||this;return i.aiDataContract={baseType:Ft.Required,baseData:Ft.Required},i.baseType=e,i.baseData=t,i}(gn=fn=fn||{})[gn.Verbose=0]="Verbose",gn[gn.Information=1]="Information",gn[gn.Warning=2]="Warning",gn[gn.Error=3]="Error",gn[gn.Critical=4]="Critical";var mn=(vn.getConfig=function(e,t,i,n){var r;return void 0===n&&(n=!1),r=i&&e.extensionConfig&&e.extensionConfig[i]&&!l.isNullOrUndefined(e.extensionConfig[i][t])?e.extensionConfig[i][t]:e[t],l.isNullOrUndefined(r)?n:r},vn);function vn(){}var _n=(yn.create=function(e,t,i,n,r,o){if(i=Kt.sanitizeString(n,i)||Xt.NotSpecified,l.isNullOrUndefined(e)||l.isNullOrUndefined(t)||l.isNullOrUndefined(i))throw Error("Input doesn't contain all required fields");var a={name:i,time:(new Date).toISOString(),iKey:"",ext:o||{},tags:[],data:{},baseType:t,baseData:e};if(!l.isNullOrUndefined(r))for(var s in r)r.hasOwnProperty(s)&&(a.data[s]=r[s]);return a},yn);function yn(){}var wn=function(){},bn=(Sn.prototype.update=function(){this.automaticSession.id||this.initializeAutomaticSession();var e=ti.Now(),t=e-this.automaticSession.acquisitionDate>this.config.sessionExpirationMs(),i=e-this.automaticSession.renewalDate>this.config.sessionRenewalMs();t||i?this.renew():(!this.cookieUpdatedTimestamp||e-this.cookieUpdatedTimestamp>Sn.cookieUpdateInterval)&&(this.automaticSession.renewalDate=e,this.setCookie(this.automaticSession.id,this.automaticSession.acquisitionDate,this.automaticSession.renewalDate))},Sn.prototype.backup=function(){this.setStorage(this.automaticSession.id,this.automaticSession.acquisitionDate,this.automaticSession.renewalDate)},Sn.prototype.initializeAutomaticSession=function(){var e=Xt.getCookie(this._logger,this._storageNamePrefix());if(e&&"function"==typeof e.split)this.initializeAutomaticSessionWithData(e);else{var t=Xt.getStorage(this._logger,this._storageNamePrefix());t&&this.initializeAutomaticSessionWithData(t)}this.automaticSession.id||this.renew()},Sn.prototype.initializeAutomaticSessionWithData=function(e){var t=e.split("|");0<t.length&&(this.automaticSession.id=t[0]);try{if(1<t.length){var i=+t[1];this.automaticSession.acquisitionDate=+new Date(i),this.automaticSession.acquisitionDate=0<this.automaticSession.acquisitionDate?this.automaticSession.acquisitionDate:0}if(2<t.length){var n=+t[2];this.automaticSession.renewalDate=+new Date(n),this.automaticSession.renewalDate=0<this.automaticSession.renewalDate?this.automaticSession.renewalDate:0}}catch(e){this._logger.throwInternal(p.CRITICAL,v,"Error parsing ai_session cookie, session will be reset: "+Xt.getExceptionName(e),{exception:Xt.dump(e)})}0==this.automaticSession.renewalDate&&this._logger.throwInternal(p.WARNING,S,"AI session renewal date is 0, session will be reset.")},Sn.prototype.renew=function(){var e=ti.Now();this.automaticSession.id=Xt.newId(),this.automaticSession.acquisitionDate=e,this.automaticSession.renewalDate=e,this.setCookie(this.automaticSession.id,this.automaticSession.acquisitionDate,this.automaticSession.renewalDate),Xt.canUseLocalStorage()||this._logger.throwInternal(p.WARNING,o,"Browser does not support local storage. Session durations will be inaccurate.")},Sn.prototype.setCookie=function(e,t,i){var n=t+this.config.sessionExpirationMs(),r=i+this.config.sessionRenewalMs(),o=new Date,a=[e,t,i];n<r?o.setTime(n):o.setTime(r);var s=this.config.cookieDomain?this.config.cookieDomain():null;Xt.setCookie(this._logger,this._storageNamePrefix(),a.join("|")+";expires="+o.toUTCString(),s),this.cookieUpdatedTimestamp=ti.Now()},Sn.prototype.setStorage=function(e,t,i){Xt.setStorage(this._logger,this._storageNamePrefix(),[e,t,i].join("|"))},Sn.acquisitionSpan=864e5,Sn.renewalSpan=18e5,Sn.cookieUpdateInterval=6e4,Sn.cookieNameConst="ai_session",Sn);function Sn(e,t){var i=this;l.isNullOrUndefined(t)?this._logger=new H:this._logger=t,"function"!=typeof(e=e||{}).sessionExpirationMs&&(e.sessionExpirationMs=function(){return Sn.acquisitionSpan}),"function"!=typeof e.sessionRenewalMs&&(e.sessionRenewalMs=function(){return Sn.renewalSpan}),this.config=e,this._storageNamePrefix=function(){return i.config.namePrefix&&i.config.namePrefix()?Sn.cookieNameConst+i.config.namePrefix():Sn.cookieNameConst},this.automaticSession=new wn}var xn,Tn=(Pe(Cn,xn=bn),Cn.getDefaultConfig=function(e){return{sessionRenewalMs:e.sessionRenewalMs&&function(){return e.sessionRenewalMs},sessionExpirationMs:e.sessionExpirationMs&&function(){return e.sessionExpirationMs},cookieDomain:e.cookieDomain&&function(){return e.cookieDomain},namePrefix:e.namePrefix&&function(){return e.namePrefix}}},Cn);function Cn(e,t){var i=Cn.getDefaultConfig(e);return xn.call(this,i,t)||this}var In=(Nn.prototype.applyApplicationContext=function(e){"string"==typeof this.app.id&&(e.ext[Vt.AppExt][_t.id]=this.app.id),"string"==typeof this.app.ver&&(e.ext[Vt.AppExt][_t.ver]=this.app.ver),"string"==typeof this.app.name&&(e.ext[Vt.AppExt][_t.appName]=this.app.name),"string"==typeof this.app.locale&&(e.ext[Vt.AppExt][_t.locale]=this.app.locale);var t=this.app.expId;"string"==typeof t&&(e.ext[Vt.AppExt][_t.expId]=t),"string"==typeof this.app.env&&(e.ext[Vt.AppExt][_t.env]=this.app.env)},Nn.prototype.applyUserContext=function(e){var t=this.user.localId;"string"==typeof t&&(e.ext[Vt.UserExt][St.localId]=t),"string"==typeof this.user.locale&&(e.ext[Vt.UserExt][St.locale]=this.user.locale)},Nn.prototype.applyWebContext=function(e){"string"==typeof this.web.domain&&(e.ext[Vt.WebExt][wt.domain]=this.web.domain),"string"==typeof this.web.browser&&(e.ext[Vt.WebExt][wt.browser]=this.web.browser),"string"==typeof this.web.browserVer&&(e.ext[Vt.WebExt][wt.browserVer]=this.web.browserVer),"string"==typeof this.web.screenRes&&(e.ext[Vt.WebExt][wt.screenRes]=this.web.screenRes),e.ext[Vt.WebExt][wt.userConsent]=this.web.userConsent},Nn.prototype.applyOsContext=function(e){"string"==typeof this.os.name&&(e.ext[Vt.OSExt][Tt.osName]=this.os.name),"string"==typeof this.os.ver&&(e.ext[Vt.OSExt][Tt.ver]=this.os.ver)},Nn.prototype.applySdkContext=function(e){e.ext[Vt.SdkExt][It.seq]=this.sdk.getSequenceId(),e.ext[Vt.SdkExt][It.ver]=this.sdk.ver,"string"==typeof this.sdk.installId&&(e.ext[Vt.SdkExt][It.installId]=this.sdk.installId)},Nn.prototype.applyIntWebContext=function(e){var t=this.intWeb.msfpc;"string"==typeof t&&(e.ext[Vt.IntWebExt][kt.msfpc]=t);var i=this.intWeb.anid;"string"==typeof i&&(e.ext[Vt.IntWebExt][kt.anid]=i),"string"==typeof this.intWeb.serviceName&&(e.ext[Vt.IntWebExt][kt.serviceName]=this.intWeb.serviceName)},Nn.prototype.applyUtcContext=function(e){e.ext[Vt.UtcExt][Pt.popSample]=this.utc.popSample},Nn.prototype.applyLocContext=function(e){e.ext[Vt.LocExt][At.tz]=this.loc.tz},Nn.prototype.applySessionContext=function(e){this.session&&"string"!=typeof this.session.id&&this.sessionManager.update();var t=this.sessionManager.automaticSession;t&&t.id&&"string"==typeof t.id&&(e.ext[Vt.AppExt][Ut.sessionId]=t.id),this.session&&this.session.id&&"string"==typeof this.session.id&&(e.ext[Vt.AppExt][Ut.sessionId]=this.session.id)},Nn.prototype.applyDeviceContext=function(e){"string"==typeof this.device.localId&&(e.ext[Vt.DeviceExt][Rt.localId]=this.device.localId),"string"==typeof this.device.make&&(e.ext[Vt.DeviceExt][Rt.make]=this.device.make),"string"==typeof this.device.model&&(e.ext[Vt.DeviceExt][Rt.model]=this.device.model),"string"==typeof this.device.deviceClass&&(e.ext[Vt.DeviceExt][Rt.deviceClass]=this.device.deviceClass)},Nn);function Nn(e,t,i){this.app=new Oe(t),this.user=new Le(e),this.os=new pt(t),this.web=new Je(t),this.sdk=new Gt(e),this.intWeb=new ft(t),this.utc=new dt,this.loc=new mt,this.device=new vt,this.sessionManager=new Tn(t,i&&i.logger),this.session=new wn}var kn=(En.prototype.initialize=function(e,t,i){e.extensionConfig=e.extensionConfig||[],this._config=e.extensionConfig[this.identifier]||{},e.extensionConfig[this.identifier]=this._config,this.context=new In(e,this._config,t)},En.prototype.processTelemetry=function(t){t.ext=t.ext?t.ext:{},t.data=t.data?t.data:{},t.ext[Vt.AppExt]=t.ext[Vt.AppExt]||{},t.ext[Vt.UserExt]=t.ext[Vt.UserExt]||{},t.ext[Vt.WebExt]=t.ext[Vt.WebExt]||{},t.ext[Vt.OSExt]=t.ext[Vt.OSExt]||{},t.ext[Vt.SdkExt]=t.ext[Vt.SdkExt]||{},t.ext[Vt.IntWebExt]=t.ext[Vt.IntWebExt]||{},t.ext[Vt.UtcExt]=t.ext[Vt.UtcExt]||{},t.ext[Vt.LocExt]=t.ext[Vt.LocExt]||{},t.ext[Vt.DeviceExt]=t.ext[Vt.DeviceExt]||{},this.context.applyApplicationContext(t),this.context.applyUserContext(t),this.context.applyWebContext(t),this.context.applyOsContext(t),this.context.applySdkContext(t),this.context.applyIntWebContext(t),this.context.applyUtcContext(t),this.context.applyLocContext(t),this.context.applySessionContext(t),this.context.applyDeviceContext(t),Object.keys(t.ext).forEach(function(e){0===Object.keys(t.ext[e]).length&&delete t.ext[e]}),this._addPropertiesIfAbsent(this._properties,t.data),this._nextPlugin&&this._nextPlugin.processTelemetry(t)},En.prototype.setNextPlugin=function(e){this._nextPlugin=e},En.prototype.getPropertiesContext=function(){return this.context},En.prototype.setProperty=function(e,t){this._properties[e]=t},En.prototype._addPropertiesIfAbsent=function(e,t){if(e)for(var i in e)e.hasOwnProperty(i)&&(t[i]||(t[i]=e[i]))},En);function En(){this.identifier="SystemPropertiesCollector",this.priority=3,this.version="2.0.1",this._properties={}}var Pn="REAL_TIME",Dn="NEAR_REAL_TIME",An="BEST_EFFORT",Mn=(Un.getPayloadBlob=function(e,t){var i="",n={};for(var r in e)if(e.hasOwnProperty(r))for(var o=0;o<e[r].length;++o){i&&(i+="\n");var a=i.length;if(2e6<(i+=this.getEventBlob(e[r][o])).length-a&&(delete e[r][o],i=i.substring(0,a)),3984588<i.length){n={};var s=e[r];e[r]=s.splice(0,o),n[r]=s;break}}return{payloadBlob:i,remainingRequest:n}},Un.getEventBlob=function(e){var t="data",i="baseData",n={};if(n.name=e.name,n.time=e.time,n.ver=e.ver,n.iKey="o:"+ge(e.iKey),e.ext)for(var r in n.ext={},e.ext)if(e.ext.hasOwnProperty(r))for(var o in n.ext[r]={},e.ext[r])e.ext[r].hasOwnProperty(o)&&e.ext[r][o]&&(n.ext[r][o]=ve(o,e.ext[r][o]).value);if(n[t]={},n[t][i]={},n[t].baseType=e.baseType,e.baseData)for(var r in e.baseData)if(e.baseData.hasOwnProperty(r)){var a=ve(r,e.baseData[r]);this._addJSONProperty(n[t][i],r,a),this._addJSONPropertyMetaData(n.ext,i+"."+r,a)}if(e.data)for(var r in e.data)e.data.hasOwnProperty(r)&&(a=ve(r,e.data[r]),this._addJSONProperty(n[t],r,a),this._addJSONPropertyMetaData(n.ext,r,a));return JSON.stringify(n)},Un._addJSONProperty=function(e,t,i){if(i){for(var n=e,r=t.split("."),o=0;o<r.length-1;++o)n[r[o]]||(n[r[o]]={}),n=n[r[o]];n[r[r.length-1]]=i.value}},Un._addJSONPropertyMetaData=function(e,t,i){if(i){var n="metadata",r=we(i.value,i.kind,i.propertyType);if(-1<r){var o=e;o[n]||(o[n]={f:{}}),o=o[n].f;for(var a=t.split("."),s=0;s<a.length-1;++s)o[a[s]]||(o[a[s]]={f:{}}),o=o[a[s]].f;ye(i.value)?o[a[a.length-1]]={a:{t:r}}:o[a[a.length-1]]={t:r}}}},Un);function Un(){}var On=(Rn.shouldRetryForStatus=function(e){return!(300<=e&&e<500&&408!==e&&429!==e||501===e||505===e)},Rn.getMillisToBackoffForRetry=function(e){var t,i=Math.floor(1200*Math.random())+2400;return t=Math.pow(2,e)*i,Math.min(t,6e5)},Rn);function Rn(){}var Ln=(Vn.prototype.setKillSwitchTenants=function(e,t){if(e&&t)try{var i=e.split(",");if("this-request-only"===t)return i;for(var n=1e3*parseInt(t,10),r=0;r<i.length;++r)this._killedTokenDictionary[i[r]]=Date.now()+n}catch(e){return[]}return[]},Vn.prototype.isTenantKilled=function(e){return void 0!==this._killedTokenDictionary[e]&&this._killedTokenDictionary[e]>Date.now()||(delete this._killedTokenDictionary[e],!1)},Vn);function Vn(){this._killedTokenDictionary={}}var Bn=(qn.prototype.allowRequestSending=function(){return this._isFirstRequest&&!this._clockSkewSet?(this._isFirstRequest=!1,!(this._allowRequestSending=!1)):this._allowRequestSending},qn.prototype.shouldAddClockSkewHeaders=function(){return this._shouldAddClockSkewHeaders},qn.prototype.getClockSkewHeaderValue=function(){return this._clockSkewHeaderValue},qn.prototype.setClockSkew=function(e){this._clockSkewSet||(e?this._clockSkewHeaderValue=e:this._shouldAddClockSkewHeaders=!1,this._clockSkewSet=!0,this._allowRequestSending=!0)},qn);function qn(){this._allowRequestSending=!0,this._shouldAddClockSkewHeaders=!0,this._isFirstRequest=!0,this._clockSkewHeaderValue="use-collector-delta",this._clockSkewSet=!1}var zn="POST",Fn=(Qn.prototype.initialize=function(e,t,i,n,r){var s=this;this._urlString=e+this._urlString,this._getWParam=t,this._postManager=i,this._httpInterface=n,this._notificationManager=r,this._httpInterface||(this._customHttpInterface=!1,this._useBeacons=!_e(),this._httpInterface={sendPOST:function(e,t,n,i){if(s._useXDomainRequest()){var r=new XDomainRequest;r.open(zn,e),r.onload=function(){n(200,{})},r.onerror=function(){n(400,{})},r.ontimeout=function(){n(500,{})},r.send(t)}else if(_e())fetch(e,((a={body:t,method:zn,credentials:"include"})[ri]=!0,a)).then(function(e){var i={};e.headers&&e.headers.forEach(function(e,t){i[t]=e}),n(e.status,i)}).catch(function(e){n(0,{})});else if("undefined"!=typeof XMLHttpRequest){var o=new XMLHttpRequest;o[ri]=!0,o.withCredentials=!0,o.open(zn,e,!i),o.onload=function(){n(o.status,s._convertAllHeadersToMap(o.getAllResponseHeaders()))},o.onerror=function(){n(o.status,s._convertAllHeadersToMap(o.getAllResponseHeaders()))},o.ontimeout=function(){n(o.status,s._convertAllHeadersToMap(o.getAllResponseHeaders()))},o.send(t)}var a}})},Qn.prototype.addQueryStringParameter=function(e,t){for(var i=0;i<this._queryStringParameters.length;i++)if(this._queryStringParameters[i].name===e)return void(this._queryStringParameters[i].value=t);this._queryStringParameters.push({name:e,value:t})},Qn.prototype.hasIdleConnection=function(){return this._activeConnections<2},Qn.prototype.sendQueuedRequests=function(){for(;this.hasIdleConnection()&&!this._paused&&0<this._requestQueue.length&&this._clockSkewManager.allowRequestSending();)this._activeConnections++,this._sendRequest(this._requestQueue.shift(),0,!1);this.hasIdleConnection()&&this._postManager._scheduleTimer()},Qn.prototype.isCompletelyIdle=function(){return 0===this._activeConnections},Qn.prototype.teardown=function(){for(;0<this._requestQueue.length;)this._sendRequest(this._requestQueue.shift(),0,!0)},Qn.prototype.pause=function(){this._paused=!0},Qn.prototype.resume=function(){this._paused=!1,this.sendQueuedRequests()},Qn.prototype.removeQueuedRequests=function(){this._requestQueue.length=0},Qn.prototype.sendSynchronousRequest=function(e){this._activeConnections++,this._sendRequest(e,0,!1,!0)},Qn.prototype._sendRequest=function(i,n,r,o){var a=this;if(void 0===o&&(o=!1),i){if(this._paused)return this._activeConnections--,void this._postManager._addBackRequest(i);var s=0,c="";for(var e in i)i.hasOwnProperty(e)&&(this._killSwitch.isTenantKilled(e)?(this._notificationManager&&this._notificationManager.eventsDiscarded(i[e],h.KillSwitch),delete i[e]):(0<c.length&&(c+=","),c+=e,s++));if(0<s){var t=Mn.getPayloadBlob(i,s);t.remainingRequest&&this._requestQueue.push(t.remainingRequest);var u=this._urlString+"&apikey="+c+"&upload-time="+Date.now().toString();this._clockSkewManager.shouldAddClockSkewHeaders()&&(u=u+"&time-delta-to-apply-millis="+this._clockSkewManager.getClockSkewHeaderValue()),this._getWParam&&(u=u+"&w="+this._getWParam());for(var l=0;l<this._queryStringParameters.length;l++)u=u+"&"+this._queryStringParameters[l].name+"="+this._queryStringParameters[l].value;for(var e in i)if(i.hasOwnProperty(e))for(l=0;l<i[e].length;++l)0<i[e][l].sendAttempt?i[e][l].sendAttempt++:i[e][l].sendAttempt=1;if(!this._customHttpInterface&&this._useBeacons&&de()&&r&&navigator.sendBeacon(u,t.payloadBlob))return;this._httpInterface&&this._httpInterface.sendPOST(u,t.payloadBlob,function(e,t){a._retryRequestIfNeeded(e,t,i,s,c,n,r,o)},r||o)}else r||this._handleRequestFinished(null,{},r,o)}},Qn.prototype._retryRequestIfNeeded=function(e,t,i,n,r,o,a,s){var c=this,u=!0;if(void 0!==e){if(t){var l=this._killSwitch.setKillSwitchTenants(t["kill-tokens"],t["kill-duration-seconds"]);this._clockSkewManager.setClockSkew(t["time-delta-millis"]);for(var p=0;p<l.length;++p)this._notificationManager&&this._notificationManager.eventsDiscarded(i[l[p]],h.KillSwitch),delete i[l[p]],n--}else this._clockSkewManager.setClockSkew("");if(200===e)return void this._handleRequestFinished(!0,i,a,s);(!On.shouldRetryForStatus(e)||n<=0)&&(u=!1)}u?s?(this._activeConnections--,this._postManager._addBackRequest(i)):o<1?setTimeout(function(){return c._sendRequest(i,o+1,!1)},On.getMillisToBackoffForRetry(o)):(this._activeConnections--,this._postManager._backOffTransmission(),this._postManager._addBackRequest(i)):this._handleRequestFinished(!1,i,a,s)},Qn.prototype._handleRequestFinished=function(e,t,i,n){if(e&&this._postManager._clearBackOff(),this._notificationManager)for(var r in t)t.hasOwnProperty(r)&&(e?this._notificationManager.eventsSent(t[r]):this._notificationManager.eventsDiscarded(t[r],h.NonRetryableStatus));this._activeConnections--,n||i||this.sendQueuedRequests()},Qn.prototype._convertAllHeadersToMap=function(e){var t={};if(e)for(var i=e.split("\n"),n=0;n<i.length;++n){var r=i[n].split(": ");t[r[0]]=r[1]}return t},Qn.prototype._useXDomainRequest=function(){if("undefined"!=typeof XMLHttpRequest){var e=new XMLHttpRequest;return Boolean(void 0===e.withCredentials&&"undefined"!=typeof XDomainRequest)}},Qn);function Qn(e){this._requestQueue=e,this._urlString="?cors=true&content-type=application/x-json-stream&client-id=NO_AUTH&client-version="+oe,this._killSwitch=new Ln,this._paused=!1,this._clockSkewManager=new Bn,this._useBeacons=!1,this._activeConnections=0,this._customHttpInterface=!0,this._queryStringParameters=[]}var Wn=(Gn.prototype.addEventToBatch=function(e){var t=e.iKey;if(t){if(e.sync){var i={};return i[t]=[e],i}this._currentNumEventsInBatch>=this._maxNumberOfEvents&&this.flushBatch(),void 0===this._currentBatch[t]&&(this._currentBatch[t]=[]),this._currentBatch[t].push(e),this._currentNumEventsInBatch++}return null},Gn.prototype.flushBatch=function(){0<this._currentNumEventsInBatch&&(this._outboundQueue.push(this._currentBatch),this._currentBatch={},this._currentNumEventsInBatch=0)},Gn.prototype.hasBatch=function(){return 0<this._currentNumEventsInBatch},Gn);function Gn(e,t){this._outboundQueue=e,this._maxNumberOfEvents=t,this._currentBatch={},this._currentNumEventsInBatch=0}var Hn=(Kn.prototype.initialize=function(e,t,i){var n=this;this._core=t,e.extensionConfig=e.extensionConfig||[],e.extensionConfig[this.identifier]=e.extensionConfig[this.identifier]||{},this._config=e.extensionConfig[this.identifier],0<this._config.eventsLimitInMem&&(this._queueSizeLimit=this._config.eventsLimitInMem),this._config.httpXHROverride&&this._config.httpXHROverride.sendPOST&&(this._xhrOverride=this._config.httpXHROverride),le(e.anonCookieName)&&this._httpManager.addQueryStringParameter("anoncknm",e.anonCookieName);var r=this._config.overrideEndpointUrl?this._config.overrideEndpointUrl:e.endpointUrl;this._notificationManager=e.extensionConfig.NotificationManager,this._httpManager.initialize(r,this._core.getWParam,this,this._xhrOverride,this._notificationManager);for(var o=0;o<i.length;++o)i[o].identifier&&"LocalStorage"===i[o].identifier&&(this._databaseAdded=!0);"undefined"!=typeof window&&(window.addEventListener?(window.addEventListener("beforeunload",function(){n.releaseAllQueuesUsingBeacons()}),window.addEventListener("unload",function(){n.releaseAllQueuesUsingBeacons()})):window.attachEvent&&(window.attachEvent("onbeforeunload",function(){n.releaseAllQueuesUsingBeacons()}),window.attachEvent("onunload",function(){n.releaseAllQueuesUsingBeacons()})))},Kn.prototype.processTelemetry=function(e){var t=e;if(!this._config.disableTelemetry&&!this._isTeardownCalled){if(this._config.overrideInstrumentationKey&&(t.iKey=this._config.overrideInstrumentationKey),t.sendAttempt||(t.sendAttempt=0),t.latency||(t.latency=ie.Normal),t.sync)if(0<this._currentBackoffCount||this._paused)t.latency=ie.RealTime,t.sync=!1;else if(this._httpManager)return void this._httpManager.sendSynchronousRequest(this._batcher.addEventToBatch(t));this._queueSize<this._queueSizeLimit?this._addEventToProperQueue(t):this._dropEventWithLatencyOrLess(t.latency)?this._addEventToProperQueue(t):this._notificationManager&&this._notificationManager.eventsDiscarded([t],h.QueueFull),this._scheduleTimer()}this._nextPlugin&&this._nextPlugin.processTelemetry(t)},Kn.prototype.teardown=function(){this.releaseAllQueuesUsingBeacons(),this._isTeardownCalled=!0},Kn.prototype.pause=function(){this._clearTimeout(),this._paused=!0,this._httpManager.pause(),this._databaseAdded&&(this._queueSize-=this._inboundQueues[ie.RealTime][0].length+this._inboundQueues[ie.CostDeferred][0].length+this._inboundQueues[ie.Normal][0].length,this._inboundQueues[ie.RealTime][0]=[],this._inboundQueues[ie.CostDeferred][0]=[],this._inboundQueues[ie.Normal][0]=[],this._httpManager.removeQueuedRequests())},Kn.prototype.resume=function(){this._paused=!1,this._httpManager.resume(),this._scheduleTimer()},Kn.prototype.setNextPlugin=function(e){this._nextPlugin=e},Kn.prototype._loadTransmitProfiles=function(e){for(var t in this._resetTransmitProfiles(),e)if(e.hasOwnProperty(t)){if(e[t].length<2)continue;if(e[t].splice(0,e[t].length-2),e[t][1]<0&&(e[t][0]=-1),0<e[t][1]&&0<e[t][0]){var i=e[t][0]/e[t][1];e[t][0]=Math.ceil(i)*e[t][1]}this._profiles[t]=e[t]}},Kn.prototype.flush=function(e,t){var i=this;if(void 0===e&&(e=!0),!this._paused)if(this._clearTimeout(),e)this._addEmptyQueues(),this._isCurrentlyFlushingNow?this._flushQueue.push(t):(this._isCurrentlyFlushingNow=!0,setTimeout(function(){return i._flushImpl(t)},0));else{this._batchEvents(ie.Normal,this._syncFlushBatcher);for(var n=0;n<this._flushOutboundQueue.length;n++)this._httpManager.sendSynchronousRequest(this._flushOutboundQueue[n]);null!=t&&t()}},Kn.prototype.setMsaAuthTicket=function(e){this._httpManager.addQueryStringParameter("AuthMsaDeviceTicket",e)},Kn.prototype._setTransmitProfile=function(e){this._currentProfile!==e&&void 0!==this._profiles[e]&&(this._clearTimeout(),this._currentProfile=e,this._scheduleTimer())},Kn.prototype._sendEventsForLatencyAndAbove=function(e){this._batchEvents(e),this._httpManager.sendQueuedRequests()},Kn.prototype._hasEvents=function(){return(0<this._inboundQueues[ie.RealTime][0].length||0<this._inboundQueues[ie.CostDeferred][0].length||0<this._inboundQueues[ie.Normal][0].length||this._batcher.hasBatch())&&this._httpManager.hasIdleConnection()},Kn.prototype._addBackRequest=function(e){if(!this._paused||!this._databaseAdded)for(var t in e)if(e.hasOwnProperty(t)){1===e[t].length&&e[t][0].sync&&(e[t][0].latency=ie.RealTime,e[t][0].sync=!1);for(var i=0;i<e[t].length;++i)e[t][i].sendAttempt<6?this.processTelemetry(e[t][i]):this._notificationManager&&this._notificationManager.eventsDiscarded([e[t][i]],h.NonRetryableStatus)}},Kn.prototype._scheduleTimer=function(){var e=this,t=this._profiles[this._currentProfile][1];if(!this._timeout&&0<=t&&!this._paused)if(this._hasEvents()){0===t&&0<this._currentBackoffCount&&(t=1);var i=1e3;0<this._currentBackoffCount&&(i=On.getMillisToBackoffForRetry(this._currentBackoffCount-1)),this._timeout=setTimeout(function(){return e._batchAndSendEvents()},t*i)}else this._timerCount=0},Kn.prototype._backOffTransmission=function(){this._currentBackoffCount<4&&(this._currentBackoffCount++,this._clearTimeout(),this._scheduleTimer())},Kn.prototype._clearBackOff=function(){0<this._currentBackoffCount&&(this._currentBackoffCount=0,this._clearTimeout(),this._scheduleTimer())},Kn.prototype._clearTimeout=function(){this._timeout&&(clearTimeout(this._timeout),this._timeout=null,this._timerCount=0)},Kn.prototype._batchAndSendEvents=function(){var e=ie.RealTime;this._timerCount++,2===this._timerCount&&(e=ie.Normal,this._timerCount=0),this._sendEventsForLatencyAndAbove(e),this._timeout=null,this._scheduleTimer()},Kn.prototype.releaseAllQueuesUsingBeacons=function(){this._clearTimeout(),0<this._flushCallback&&clearTimeout(this._flushCallback),this._paused||this._databaseAdded||(this._mergeQueues(),this._batchEvents(ie.Normal),this._httpManager.teardown())},Kn.prototype._removeFirstQueues=function(){this._inboundQueues[ie.RealTime].shift(),this._inboundQueues[ie.CostDeferred].shift(),this._inboundQueues[ie.Normal].shift()},Kn.prototype._addEmptyQueues=function(){this._inboundQueues[ie.RealTime].push([]),this._inboundQueues[ie.CostDeferred].push([]),this._inboundQueues[ie.Normal].push([])},Kn.prototype._mergeQueues=function(){for(var e=ie.Normal;e<=ie.RealTime;e++)for(var t=1;t<this._inboundQueues[e].length;t++)for(;0<this._inboundQueues[e][t].length;)this._inboundQueues[e][0].push(this._inboundQueues[e][t].pop())},Kn.prototype._addEventToProperQueue=function(e){this._paused&&this._databaseAdded||(this._queueSize++,this._inboundQueues[e.latency][this._inboundQueues[e.latency].length-1].push(e))},Kn.prototype._dropEventWithLatencyOrLess=function(e){for(var t=ie.Normal;t<=e;){if(0<this._inboundQueues[t][this._inboundQueues[t].length-1].length){var i=this._inboundQueues[t][this._inboundQueues[t].length-1].splice(0,20);return this._notificationManager&&this._notificationManager.eventsDiscarded(i,h.QueueFull),!0}t++}return!1},Kn.prototype._batchEvents=function(e,t){void 0===t&&(t=this._batcher);for(var i=ie.RealTime;e<=i;){for(;0<this._inboundQueues[i][0].length;){var n=this._inboundQueues[i][0].pop();this._queueSize--,t.addEventToBatch(n)}i--}t.flushBatch()},Kn.prototype._flushImpl=function(e){var t=this;this._hasEvents()&&this._sendEventsForLatencyAndAbove(ie.Normal),this._checkOutboundQueueEmptyAndSent(function(){t._removeFirstQueues(),null!=e&&e(),0<t._flushQueue.length?t._flushCallback=setTimeout(function(){return t._flushImpl(t._flushQueue.shift())},0):(t._isCurrentlyFlushingNow=!1,t._hasEvents()&&t._scheduleTimer())})},Kn.prototype._checkOutboundQueueEmptyAndSent=function(e){var t=this;this._httpManager.isCompletelyIdle()?e():this._flushCallback=setTimeout(function(){return t._checkOutboundQueueEmptyAndSent(e)},250)},Kn.prototype._resetTransmitProfiles=function(){this._clearTimeout(),this._initializeProfiles(),this._currentProfile=Pn,this._scheduleTimer()},Kn.prototype._initializeProfiles=function(){this._profiles={},this._profiles[Pn]=[2,1],this._profiles[Dn]=[6,3],this._profiles[An]=[18,9]},Kn);function Kn(){this.identifier="PostChannel",this.priority=1011,this.version="2.0.1",this._isTeardownCalled=!1,this._isCurrentlyFlushingNow=!1,this._flushQueue=[],this._databaseAdded=!1,this._paused=!1,this._queueSize=0,this._queueSizeLimit=1e4,this._profiles={},this._currentProfile=Pn,this._timeout=null,this._currentBackoffCount=0,this._timerCount=0,this._flushCallback=-1,this._flushOutboundQueue=[],this._outboundQueue=[],this._inboundQueues={},this._inboundQueues[ie.RealTime]=[],this._inboundQueues[ie.CostDeferred]=[],this._inboundQueues[ie.Normal]=[],this._initializeProfiles(),this._addEmptyQueues(),this._batcher=new Wn(this._outboundQueue,500),this._syncFlushBatcher=new Wn(this._flushOutboundQueue,500),this._httpManager=new Fn(this._outboundQueue)}var jn=(Xn.prototype.trackPageView=function(t,i){var n=this,r=t.name;!l.isNullOrUndefined(r)&&"string"==typeof r||(t.name=window.document&&window.document.title||"");var o=t.uri;if(!l.isNullOrUndefined(o)&&"string"==typeof o||(t.uri=window.location&&window.location.href||""),!this._pageViewPerformanceManager.isPerformanceTimingSupported())return this.appInsights.sendPageViewInternal(t,i),this._channel().forEach(function(e){e.forEach(function(e){return e.flush(!0)})}),void this._logger.throwInternal(p.WARNING,b,"trackPageView: navigation timing API used for calculation of page duration is not supported in this browser. This page view will be collected without duration and timing info.");var a=!1,s=void 0,c=this._pageViewPerformanceManager.getPerformanceTiming().navigationStart;s=ti.GetDuration(c,+new Date),this._pageViewPerformanceManager.shouldCollectDuration(s)||(s=void 0);var e=void 0;l.isNullOrUndefined(i)||l.isNullOrUndefined(i.duration)||(e=i.duration),!this.overridePageViewDuration&&isNaN(e)||(isNaN(e)&&((i=i||{}).duration=s),this.appInsights.sendPageViewInternal(t,i),this._channel().forEach(function(e){e.forEach(function(e){return e.flush(!0)})}),a=!0),i=i||{};var u=setInterval(function(){try{if(n._pageViewPerformanceManager.isPerformanceTimingDataReady()){clearInterval(u);var e={name:r,uri:o};n._pageViewPerformanceManager.populatePageViewPerformanceEvent(e),e.isValid||a?(a||(i.duration=e.durationMs,n.appInsights.sendPageViewInternal(t,i)),n.pageViewPerformanceSent||(n.appInsights.sendPageViewPerformanceInternal(e,i),n.pageViewPerformanceSent=!0),n._channel().forEach(function(e){e.forEach(function(e){return e.flush(!0)})})):(i.duration=s,n.appInsights.sendPageViewInternal(t,i),n._channel().forEach(function(e){e.forEach(function(e){return e.flush(!0)})}))}else 6e4<ti.GetDuration(c,+new Date)&&(clearInterval(u),a||(i.duration=6e4,n.appInsights.sendPageViewInternal(t,i),n._channel().forEach(function(e){e.forEach(function(e){return e.flush(!0)})})))}catch(e){n._logger.throwInternal(p.CRITICAL,P,"trackPageView failed on page load calculation: "+Xt.getExceptionName(e),{exception:Xt.dump(e)})}},100)},Xn);function Xn(e,t,i,n){this.pageViewPerformanceSent=!1,this.overridePageViewDuration=!1,this.overridePageViewDuration=t,this.appInsights=e,this._pageViewPerformanceManager=n,i&&(this._channel=function(){return i.getTransmissionControls()},this._logger=i.logger)}var Jn=(Yn.prototype.trackPreviousPageVisit=function(e,t){try{var i=this.restartPageVisitTimer(e,t);i&&this.pageVisitTimeTrackingHandler(i.pageName,i.pageUrl,i.pageVisitTime)}catch(e){this._logger.warnToConsole("Auto track page visit time failed, metric will not be collected: "+Xt.dump(e))}},Yn.prototype.restartPageVisitTimer=function(e,t){try{var i=this.stopPageVisitTimer();return this.startPageVisitTimer(e,t),i}catch(e){return this._logger.warnToConsole("Call to restart failed: "+Xt.dump(e)),null}},Yn.prototype.startPageVisitTimer=function(e,t){try{if(Xt.canUseSessionStorage()){if(null!=Xt.getSessionStorage(this._logger,this.prevPageVisitDataKeyName))throw new Error("Cannot call startPageVisit consecutively without first calling stopPageVisit");var i=new Zn(e,t),n=JSON.stringify(i);Xt.setSessionStorage(this._logger,this.prevPageVisitDataKeyName,n)}}catch(e){this._logger.warnToConsole("Call to start failed: "+Xt.dump(e))}},Yn.prototype.stopPageVisitTimer=function(){try{if(Xt.canUseSessionStorage()){var e=Date.now(),t=Xt.getSessionStorage(this._logger,this.prevPageVisitDataKeyName);if(t){var i=JSON.parse(t);return i.pageVisitTime=e-i.pageVisitStartTime,Xt.removeSessionStorage(this._logger,this.prevPageVisitDataKeyName),i}return null}return null}catch(e){return this._logger.warnToConsole("Stop page visit timer failed: "+Xt.dump(e)),null}},Yn);function Yn(e,t){this.prevPageVisitDataKeyName="prevPageVisitData",this.pageVisitTimeTrackingHandler=t,this._logger=e}var Zn=function(e,t){this.pageVisitStartTime=Date.now(),this.pageName=e,this.pageUrl=t},$n=(er.prototype.populatePageViewPerformanceEvent=function(e){e.isValid=!1;var t=this.getPerformanceTiming();if(t){var i=ti.GetDuration(t.navigationStart,t.loadEventEnd),n=ti.GetDuration(t.navigationStart,t.connectEnd),r=ti.GetDuration(t.requestStart,t.responseStart),o=ti.GetDuration(t.responseStart,t.responseEnd),a=ti.GetDuration(t.responseEnd,t.loadEventEnd);0==i?this._logger.throwInternal(p.WARNING,_,"error calculating page view performance.",{total:i,network:n,request:r,response:o,dom:a}):this.shouldCollectDuration(i,n,r,o,a)?i<Math.floor(n)+Math.floor(r)+Math.floor(o)+Math.floor(a)?this._logger.throwInternal(p.WARNING,m,"client performance math error.",{total:i,network:n,request:r,response:o,dom:a}):(e.durationMs=i,e.perfTotal=e.duration=Xt.msToTimeSpan(i),e.networkConnect=Xt.msToTimeSpan(n),e.sentRequest=Xt.msToTimeSpan(r),e.receivedResponse=Xt.msToTimeSpan(o),e.domProcessing=Xt.msToTimeSpan(a),e.isValid=!0):this._logger.throwInternal(p.WARNING,A,"Invalid page load duration value. Browser perf data won't be sent.",{total:i,network:n,request:r,response:o,dom:a})}},er.prototype.getPerformanceTiming=function(){return this.isPerformanceTimingSupported()?window.performance.timing:null},er.prototype.isPerformanceTimingSupported=function(){return"undefined"!=typeof window&&window.performance&&window.performance.timing},er.prototype.isPerformanceTimingDataReady=function(){var e=window.performance.timing;return 0<e.domainLookupStart&&0<e.navigationStart&&0<e.responseStart&&0<e.requestStart&&0<e.loadEventEnd&&0<e.responseEnd&&0<e.connectEnd&&0<e.domLoading},er.prototype.shouldCollectDuration=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=["googlebot","adsbot-google","apis-google","mediapartners-google"],n=navigator.userAgent,r=!1;if(n)for(var o=0;o<i.length;o++)r=r||-1!==n.toLowerCase().indexOf(i[o]);if(r)return!1;for(var a=0;a<e.length;a++)if(e[a]>=this.MAX_DURATION_ALLOWED)return!1;return!0},er);function er(e){this.MAX_DURATION_ALLOWED=36e5,e&&(this._logger=e.logger)}var tr="duration",ir=(nr.getDefaultConfig=function(e){return(e=e||{}).sessionRenewalMs=18e5,e.sessionExpirationMs=864e5,e.disableExceptionTracking=Xt.stringToBoolOrDefault(e.disableExceptionTracking),e.autoTrackPageVisitTime=Xt.stringToBoolOrDefault(e.autoTrackPageVisitTime),e.overridePageViewDuration=Xt.stringToBoolOrDefault(e.overridePageViewDuration),(isNaN(e.samplingPercentage)||e.samplingPercentage<=0||100<=e.samplingPercentage)&&(e.samplingPercentage=100),e.isCookieUseDisabled=Xt.stringToBoolOrDefault(e.isCookieUseDisabled),e.isStorageUseDisabled=Xt.stringToBoolOrDefault(e.isStorageUseDisabled),e.isBrowserLinkTrackingEnabled=Xt.stringToBoolOrDefault(e.isBrowserLinkTrackingEnabled),e},nr.prototype.processTelemetry=function(e){for(var t=!1,i=this._telemetryInitializers.length,n=0;n<i;++n){var r=this._telemetryInitializers[n];if(r)try{if(!1===r.apply(null,[e])){t=!0;break}}catch(e){this._logger.throwInternal(p.CRITICAL,q,"One of telemetry initializers failed, telemetry item will not be sent: "+Xt.getExceptionName(e),{exception:Xt.dump(e)},!0)}}t||l.isNullOrUndefined(this._nextPlugin)||this._nextPlugin.processTelemetry(e)},nr.prototype.setNextPlugin=function(e){this._nextPlugin=e},nr.prototype.trackEvent=function(e,t){try{var i=_n.create(e,gi.dataType,gi.envelopeType,this._logger,t);this._setTelemetryNameAndIKey(i),this.core.track(i)}catch(e){this._logger.throwInternal(p.WARNING,D,"trackTrace failed, trace will not be collected: "+Xt.getExceptionName(e),{exception:Xt.dump(e)})}},nr.prototype.startTrackEvent=function(e){try{this._eventTracking.start(e)}catch(e){this._logger.throwInternal(p.CRITICAL,x,"startTrackEvent failed, event will not be collected: "+Xt.getExceptionName(e),{exception:Xt.dump(e)})}},nr.prototype.stopTrackEvent=function(e,t,i){try{this._eventTracking.stop(e,void 0,t)}catch(e){this._logger.throwInternal(p.CRITICAL,T,"stopTrackEvent failed, event will not be collected: "+Xt.getExceptionName(e),{exception:Xt.dump(e)})}},nr.prototype.trackTrace=function(e,t){try{var i=_n.create(e,rn.dataType,rn.envelopeType,this._logger,t);this._setTelemetryNameAndIKey(i),this.core.track(i)}catch(e){this._logger.throwInternal(p.WARNING,D,"trackTrace failed, trace will not be collected: "+Xt.getExceptionName(e),{exception:Xt.dump(e)})}},nr.prototype.trackMetric=function(e,t){try{var i=_n.create(e,Bi.dataType,Bi.envelopeType,this._logger,t);this._setTelemetryNameAndIKey(i),this.core.track(i)}catch(e){this._logger.throwInternal(p.CRITICAL,k,"trackMetric failed, metric will not be collected: "+Xt.getExceptionName(e),{exception:Xt.dump(e)})}},nr.prototype.trackPageView=function(e,t){try{var i=e||{};this._pageViewManager.trackPageView(i,t),this.config.autoTrackPageVisitTime&&this._pageVisitTimeManager.trackPreviousPageVisit(i.name,i.uri)}catch(e){this._logger.throwInternal(p.CRITICAL,E,"trackPageView failed, page view will not be collected: "+Xt.getExceptionName(e),{exception:Xt.dump(e)})}},nr.prototype.sendPageViewInternal=function(e,t,i){"undefined"!=typeof document&&(e.refUri=e.refUri||document.referrer);var n=_n.create(e,Gi.dataType,Gi.envelopeType,this._logger,t,i);this._setTelemetryNameAndIKey(n),this.core.track(n),this._trackAjaxAttempts=0},nr.prototype.sendPageViewPerformanceInternal=function(e,t,i){var n=_n.create(e,ln.dataType,ln.envelopeType,this._logger,t,i);this._setTelemetryNameAndIKey(n),this.core.track(n)},nr.prototype.trackPageViewPerformance=function(e,t){try{this._pageViewPerformanceManager.populatePageViewPerformanceEvent(e),this.sendPageViewPerformanceInternal(e,t)}catch(e){this._logger.throwInternal(p.CRITICAL,E,"trackPageViewPerformance failed, page view will not be collected: "+Xt.getExceptionName(e),{exception:Xt.dump(e)})}},nr.prototype.startTrackPage=function(e){try{"string"!=typeof e&&(e=window.document&&window.document.title||""),this._pageTracking.start(e)}catch(e){this._logger.throwInternal(p.CRITICAL,C,"startTrackPage failed, page view may not be collected: "+Xt.getExceptionName(e),{exception:Xt.dump(e)})}},nr.prototype.stopTrackPage=function(e,t,i,n){try{"string"!=typeof e&&(e=window.document&&window.document.title||""),"string"!=typeof t&&(t=window.location&&window.location.href||""),this._pageTracking.stop(e,t,i,n),this.config.autoTrackPageVisitTime&&this._pageVisitTimeManager.trackPreviousPageVisit(e,t)}catch(e){this._logger.throwInternal(p.CRITICAL,I,"stopTrackPage failed, page view will not be collected: "+Xt.getExceptionName(e),{exception:Xt.dump(e)})}},nr.prototype.sendExceptionInternal=function(e,t,i){var n=new Si(this._logger,e.exception||new Error(Xt.NotSpecified),e.properties,e.measurements,e.severityLevel,e.id).toInterface(),r=_n.create(n,Si.dataType,Si.envelopeType,this._logger,t,i);this._setTelemetryNameAndIKey(r),this.core.track(r)},nr.prototype.trackException=function(e,t){try{this.sendExceptionInternal(e,t)}catch(e){this._logger.throwInternal(p.CRITICAL,N,"trackException failed, exception will not be collected: "+Xt.getExceptionName(e),{exception:Xt.dump(e)})}},nr.prototype._onerror=function(t){try{var e={url:t&&t.url||document.URL,lineNumber:t.lineNumber,columnNumber:t.columnNumber,message:t.message};if(Xt.isCrossOriginError(t.message,t.url,t.lineNumber,t.columnNumber,t.error))this._sendCORSException(e.url);else{if(!Xt.isError(t.error)){var i="window.onerror@"+e.url+":"+t.lineNumber+":"+(t.columnNumber||0);t.error=new Error(t.message),t.error.stack=i}this.trackException({exception:t.error,severityLevel:fn.Error},e)}}catch(e){var n=t.error?t.error.name+", "+t.error.message:"null";this._logger.throwInternal(p.CRITICAL,y,"_onError threw exception while logging error, error will not be collected: "+Xt.getExceptionName(e),{exception:Xt.dump(e),errorString:n})}},nr.prototype.addTelemetryInitializer=function(e){this._telemetryInitializers.push(e)},nr.prototype._initialize=function(e,t,i){var a=this;if(!this._isInitialized){if(l.isNullOrUndefined(t))throw Error("Error initializing");this.core=t,this._logger=t.logger,this._globalconfig={instrumentationKey:e.instrumentationKey,endpointUrl:e.endpointUrl||"https://dc.services.visualstudio.com/v2/track"},this.config=e.extensionConfig&&e.extensionConfig[this.identifier]?e.extensionConfig[this.identifier]:{};var n=nr.getDefaultConfig();if(void 0!==n){for(var r in n)this.config[r]=mn.getConfig(e,r,this.identifier,n[r]);if(this._globalconfig)for(var r in n)void 0===this._globalconfig[r]&&(this._globalconfig[r]=n[r])}this.config.isCookieUseDisabled&&Xt.disableCookies(),this.config.isStorageUseDisabled&&Xt.disableStorage();var o={instrumentationKey:function(){return e.instrumentationKey},accountId:function(){return a.config.accountId||e.accountId},sessionRenewalMs:function(){return a.config.sessionRenewalMs||e.sessionRenewalMs},sessionExpirationMs:function(){return a.config.sessionExpirationMs||e.sessionExpirationMs},sampleRate:function(){return a.config.samplingPercentage||e.samplingPercentage},cookieDomain:function(){return a.config.cookieDomain||e.cookieDomain},sdkExtension:function(){return a.config.sdkExtension||e.sdkExtension},isBrowserLinkTrackingEnabled:function(){return a.config.isBrowserLinkTrackingEnabled||e.isBrowserLinkTrackingEnabled},appId:function(){return a.config.appId||e.appId}};if(this._pageViewPerformanceManager=new $n(this.core),this._pageViewManager=new jn(this,this.config.overridePageViewDuration,this.core,this._pageViewPerformanceManager),this._pageVisitTimeManager=new Jn(this._logger,function(e,t,i){return a.trackPageVisitTime(e,t,i)}),this._telemetryInitializers=[],this._addDefaultTelemetryInitializers(o),this._eventTracking=new rr(this._logger,"trackEvent"),this._eventTracking.action=function(e,t,i,n){(n=n||{})[tr]=i.toString(),a.trackEvent({name:e,properties:n})},this._pageTracking=new rr(this._logger,"trackPageView"),!(this._pageTracking.action=function(e,t,i,n,r){l.isNullOrUndefined(n)&&(n={}),n[tr]=i.toString();var o={name:e,uri:t,properties:n,measurements:r};a.sendPageViewInternal(o)})===this.config.disableExceptionTracking&&!this.config.autoExceptionInstrumented){var s=window.onerror,c=this;window.onerror=function(e,t,i,n,r){var o=s&&s(e,t,i,n,r);return!0!==o&&c._onerror({message:e,url:t,lineNumber:i,columnNumber:n,error:r}),o},this.config.autoExceptionInstrumented=!0}this._isInitialized=!0}},nr.prototype.trackPageVisitTime=function(e,t,i){var n={PageName:e,PageUrl:t};this.trackMetric({name:"PageVisitTime",average:i,max:i,min:i,sampleCount:1},n)},nr.prototype._addDefaultTelemetryInitializers=function(e){if(!e.isBrowserLinkTrackingEnabled()){var n=["/browserLinkSignalR/","/__browserLink/"];this._addTelemetryInitializer(function(e){if(e.baseType===Yi.dataType){var t=e.baseData;if(t)for(var i=0;i<n.length;i++)if(t.target&&0<=t.target.indexOf(n[i]))return!1}return!0})}},nr.prototype._addTelemetryInitializer=function(e){this._telemetryInitializers.push(e)},nr.prototype._sendCORSException=function(e){var t={message:"Script error: The browser's same-origin policy prevents us from getting the details of this exception. Consider using the 'crossorigin' attribute.",url:e,lineNumber:0,columnNumber:0,error:void 0},i=_n.create(t,Si.dataType,Si.envelopeType,this._logger,{url:e});this.core.track(i)},nr.prototype._setTelemetryNameAndIKey=function(e){e.iKey=this._globalconfig.instrumentationKey;var t=this._globalconfig.instrumentationKey.replace(/-/g,"");e.name=e.name.replace("{0}",t)},nr.Version="2.0.1",nr);function nr(){this.identifier="ApplicationInsightsAnalytics",this.priority=160,this._isInitialized=!1,this._trackAjaxAttempts=0,this.initialize=this._initialize.bind(this)}var rr=(or.prototype.start=function(e){void 0!==this._events[e]&&this._logger.throwInternal(p.WARNING,V,"start was called more than once for this event without calling stop.",{name:this._name,key:e},!0),this._events[e]=+new Date},or.prototype.stop=function(e,t,i,n){var r=this._events[e];if(isNaN(r))this._logger.throwInternal(p.WARNING,B,"stop was called without a corresponding start.",{name:this._name,key:e},!0);else{var o=+new Date,a=ti.GetDuration(r,o);this.action(e,t,a,i,n)}delete this._events[e],this._events[e]=void 0},or);function or(e,t){this._name=t,this._events={},this._logger=e}function ar(e){for(var t in e)sr(e[t])&&("{}"!==JSON.stringify(e[t])||"callback"===t)||delete e[t]}function sr(e){return!(null==e||""===e)}function cr(e,t,i){var n=e;if(n){for(n=lr(n);!t(n,i);)if(!(n=lr(n=n.parentNode))||!n.getAttribute)return null;return n}}function ur(e){return"A"===e.nodeName}function lr(e){return e}function pr(e,t){return 0<function(e,t){var i=e.left,n=e.top,r=e.right,o=e.bottom,a=t.left,s=t.top,c=t.right,u=t.bottom;return Math.max(0,Math.min(r,c)-Math.max(i,a))*Math.max(0,Math.min(o,u)-Math.max(n,s))}((e=lr(e)).getBoundingClientRect(),t)}function hr(e,t){return!!sr(fr(e,t))}function fr(e,t){return cr(e,gr,t)}function gr(e,t){var i=e.getAttribute(t);return sr(i)||""===i}function dr(e){return"["+e+"]"}function mr(i,n,r,o){var a;return function(){var e=arguments,t=!a;clearTimeout(a),a=setTimeout(function(){a=0,n&&n.apply(o,e)},r),t&&i&&i.apply(o,e)}}function vr(){return{h:parseInt(document.body.scrollLeft||document.documentElement.scrollLeft||window.pageXOffset||0,10),v:parseInt(document.body.scrollTop||document.documentElement.scrollTop||window.pageYOffset||0,10)}}function _r(){var e={h:0,w:0};return window.screen&&(e.h=window.innerHeight||document.body.clientHeight||document.documentElement.clientHeight,e.w=window.innerWidth||document.body.clientWidth||document.documentElement.clientWidth),e}var yr={BUTTON:!0,CHECKBOX:!0,RADIO:!0,RESET:!0,SUBMIT:!0};function wr(e,t){var i,n={};i=document.querySelectorAll("meta");for(var r=0;r<i.length;r++){var o=i[r];if(o.name)if(0===o.name.toLowerCase().indexOf(e))n[t?o.name.replace(e,""):o.name]=o.content}return n}function br(e){if(e){var t=function(e){return cr(e,ur)}(e);if(1===t.length){if(t[0].href)return t[0].href;if(t[0].src)return t[0].src}}return""}function Sr(e){if(!e||!e.attributes)return!1;try{var t=e.getAttribute("data-dc");return!!sr(t)&&"pii"===t.toLowerCase()}catch(e){return!1}}function xr(e,t){return e.coreData&&e.coreData.requestUri&&""!==e.coreData.requestUri?e.coreData.requestUri:function(e,t){var i=t.protocol+"//"+t.hostname+(sr(t.port)?":"+t.port:"")+t.pathname;e.urlCollectHash&&(i+=t.hash);if(e.urlCollectQuery){var n=t.search;if(!n){var r=t.hash,o=r.indexOf("?");-1!==o&&(n=r.slice(o))}return i+n}return i}(e,t)}function Tr(e,t){var i,n,r="",o={},a=[],s=e.cookiesToCollect;if(!1===e.shareAuthStatus)a=s;else for(var c=0;c<s.length;c++)"ANON"!==s[c]&&a.push(s[c]);try{try{window.varCustomerCookies&&0<window.varCustomerCookies.length&&(a=a.concat(window.varCustomerCookies))}catch(e){t.warnToConsole("Failed to get cookies")}for(i in a)o.hasOwnProperty(a[i])||(o[a[i]]="")!==(n=decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(a[i]).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1")))&&(r+=a[i]+"="+n+";")}catch(e){t.warnToConsole("Failed to get cookies")}return r}var Cr={CLICKLEFT:"CL",CLICKRIGHT:"CR",CLICKMIDDLE:"CM",SCROLL:"S",ZOOM:"Z",RESIZE:"R",KEYBOARDENTER:"KE",KEYBOARDSPACE:"KS",OTHER:"O"},Ir={longNames:{isShortNames:!1,id:"data-bi-id",areaName:"data-bi-area",slotNumber:"data-bi-slot",contentName:"data-bi-name",contentSource:"data-bi-source",templateName:"data-bi-view",productId:"data-bi-product",contentType:"data-bi-type"},shortNames:{isShortNames:!0,id:"data-bi-id",areaName:"data-bi-an",slotNumber:"data-bi-sn",contentName:"data-bi-cn",contentSource:"data-bi-cs",templateName:"data-bi-tn",productId:"data-bi-pid",contentType:"data-bi-ct"}},Nr=(kr.prototype._setBasicProperties=function(e,t){e.ver="1.0",e.id=this._id.getLastPageViewId(),sr(e.name)||(e.name=function(e,t){if(t&&t.pageName)return t.pageName;if(e.callback&&"function"==typeof e.callback.pageName)return e.callback.pageName();if(e.coreData&&e.coreData.pageName)return e.coreData.pageName;var i=window.location.pathname,n=i.split("/");return i=n&&""!==n[n.length-1]?n[n.length-1]:"Undefined"}(this._config,t)),sr(e.uri)||(e.uri=xr(this._config,window.location))},kr.prototype._setCommonProperties=function(e,t,i){if(this._setBasicProperties(e,i),this._config.coreData&&this._config.coreData.pageTags&&(this._pageTags=Ie(!0,this._pageTags,this._config.coreData.pageTags)),this._pageTagsCallback&&(this._pageTags=Ie(!0,this._pageTags,this._pageTagsCallback())),this._metaTags)for(var n in this._pageTags.metaTags={},this._metaTags)"behavior"!=n&&"market"!=n&&"pageType"!=n&&(this._pageTags.metaTags[n]=this._metaTags[n]);this._pageTypeMetaTag=this._getMetaData(this._metaTags,this._config.coreData,"pageType"),this._marketMetaTag=this._getMetaData(this._metaTags,this._config.coreData,"market"),this._behaviorMetaTag=this._getMetaData(this._metaTags,this._config.coreData,"behavior"),sr(this._contentBlobFieldNames)||(this._contentBlobFieldNames=!0===this._config.useShortNameForContentBlob?Ir.shortNames:Ir.longNames),sr(this._pageTypeMetaTag)&&(e.pageType=this._pageTypeMetaTag),sr(this._marketMetaTag)&&(e.market=this._marketMetaTag),e.properties={},e.properties.pageTags=sr(i.pageTags)?i.pageTags:this._pageTags,e.isLoggedIn=this._config.callback&&"function"==typeof this._config.callback.signedinStatus?this._config.callback.signedinStatus():this._config.isLoggedIn,t.cookieEnabled=be()},kr.prototype._getMetaData=function(e,t,i){return t&&t[i]?t[i]:e?e[i]:""},kr.prototype._getBehavior=function(e){var t=0;if(sr(e.behavior))t=e.behavior;else if(sr(this._behaviorMetaTag)){var i=parseInt(this._behaviorMetaTag);isNaN(i)||(t=i)}return t},kr.prototype._getElementContent=function(e,t,i,n){if(!e)return"";var r,o={},a=fr(e,i.biBlobAttributeTag);if(a&&(r=a.getAttribute(i.biBlobAttributeTag)),r)o=JSON.parse(r);else{var s=fr(e,dr(this._contentBlobFieldNames.id));s=lr(e);var c=fr(e,this._contentBlobFieldNames.areaName),u=Ie({},this._getAreaContent(c));(o={id:s.getAttribute(this._contentBlobFieldNames.id)||e.id||"",aN:u.areaName,sN:s.getAttribute(this._contentBlobFieldNames.slotNumber),cN:s.getAttribute(this._contentBlobFieldNames.contentName)||this._getDefaultContentName(e,i.useDefaultContentName)||s.getAttribute("alt")||"",cS:s.getAttribute(this._contentBlobFieldNames.contentSource)||u.contentSource,tN:u.templateName,pid:s.getAttribute(this._contentBlobFieldNames.productId),cT:s.getAttribute(this._contentBlobFieldNames.contentType)||u.type}).id&&o.aN&&o.sN&&o.cN||n.warnToConsole("Invalid content blob.  Missing required attributes (id, aN/area, sN/slot), cN/contentName.  Content information will still be collected!"),this._contentBlobFieldNames.isShortNames||(o={contentId:o.id,areaName:o.aN,slotNumber:o.sN,contentName:o.cN,contentSource:o.cS,templateName:o.tN,productId:o.pid,contentType:o.cT});for(var l,p=0;p<s.attributes.length;p++)(l=s.attributes[p]).name!==this._contentBlobFieldNames.id&&l.name!==this._contentBlobFieldNames.areaName&&l.name!==this._contentBlobFieldNames.slotNumber&&l.name!==this._contentBlobFieldNames.contentName&&l.name!==this._contentBlobFieldNames.contentSource&&l.name!==this._contentBlobFieldNames.templateName&&l.name!==this._contentBlobFieldNames.productId&&l.name!==this._contentBlobFieldNames.contentType&&-1!==l.name.indexOf("data-bi-")&&(o[l.name.replace("data-bi-","")]=l.value)}return ar(o),i.autoCapture.lineage&&t&&(o=Ie(o,this._getLineageDetails(e,i))),o},kr.prototype._getLineageDetails=function(e,t){for(var i,n,r=[],o=[],a=t.biBlobAttributeTag,s="data-module-id",c=void 0;e;){var u=e.getAttribute(a)||e[a],l=e.getAttribute(s)||e[s];if(u){var p=JSON.parse(u);p&&(i=p.cN||p.cT,n=p.id||void 0,(i||n)&&(r.push(i),l&&(c=i),o.push(n)))}else i=e.getAttribute(this._contentBlobFieldNames.contentName)||e.getAttribute(this._contentBlobFieldNames.contentType),n=e.getAttribute(this._contentBlobFieldNames.id)||void 0,(i||n)&&(r.push(i),l&&(c=i),o.push(n));e=e.parentElement}return{lineage:r.join(">"),lineageById:o.join(">"),lineageContainerName:c}},kr.prototype._getAreaContent=function(e){if(e=lr(e))return{areaName:e.getAttribute(this._contentBlobFieldNames.areaName),templateName:e.getAttribute(this._contentBlobFieldNames.templateName),contentSource:e.getAttribute(this._contentBlobFieldNames.contentSource),product:e.getAttribute(this._contentBlobFieldNames.productId),type:e.getAttribute(this._contentBlobFieldNames.contentType)}},kr.prototype._getDefaultContentName=function(e,t){if(!1===t||Sr(e)||!e.tagName)return"";var i;switch(e.tagName){case"A":i=document.all?e.innerText||e.innerHTML:e.text||e.innerHTML;break;case"IMG":case"AREA":i=e.alt;break;default:i=e.value||e.name||e.alt||e.innerText||e.id}return i.substring(0,200)},kr);function kr(e,t,i,n,r,o){this._webAnalyticsPlugin=e,this._config=t,this._id=i,this._pageTagsCallback=n,this._metaTags=r,this._traceLogger=o,this._contentBlobFieldNames=null,this._pageTags={}}var Er,Pr=(Pe(Dr,Er=Nr),Dr.prototype.capturePageView=function(e,t){e=sr(e)?e:{};var i={},n=sr(t)?t:{};this._setCommonProperties(i,n,e),i.refUri=sr(e.referrerUri)?e.referrerUri:this._config.coreData.referrerUri,i.isManual=!e.isAuto;var r=Tr(this._config,this._traceLogger);r&&(n.cookies=r),n.behavior=this._getBehavior(e),this._webAnalyticsPlugin.trackPageView(i,n)},Dr);function Dr(){return null!==Er&&Er.apply(this,arguments)||this}var Ar,Mr=(Pe(Ur,Ar=Nr),Ur.prototype.trackPageAction=function(e,t){var i={web:{}};i.web.isManual=e.isManual;var n={name:"Ms.Web.PageAction",baseType:"PageActionData",ext:i,data:{},baseData:{},latency:ie.Normal};for(var r in n.baseData.name=e.name,n.baseData.uri=e.uri,n.baseData.market=e.market,n.baseData.pageType=e.pageType,n.baseData.isLoggedIn=e.isLoggedIn,n.baseData.id=e.id,n.baseData.properties=e.properties,n.baseData.ver=e.ver,n.baseData.actionType=e.actionType,n.baseData.behavior=e.behavior,n.baseData.clickCoordinates=e.clickCoordinates,n.baseData.content=e.content,n.baseData.contentVer=e.contentVer,n.baseData.targetUri=e.targetUri,t)t.hasOwnProperty(r)&&(n.data[r]||(n.data[r]=t[r]));this._webAnalyticsPlugin.core.track(n)},Ur.prototype.capturePageAction=function(e,t,i,n){t=sr(t)?t:{};var r={},o=sr(i)?i:{};this._setCommonProperties(r,o,t),r.isManual=!t.isAuto,r.behavior=this._getBehavior(t);var a={};e=lr(e),n&&(r.behavior=9),e&&(r.targetUri=function(e){var t="";switch(e.tagName){case"A":case"AREA":t=e.href||"";break;case"IMG":t=br(e);break;case"INPUT":var i=e.type;i&&yr[i.toUpperCase()]&&(t=e.form&&e.form.action||window.location.pathname)}return t}(e),(a=Ie(a=this._getElementContent(e,!0,this._config,this._traceLogger),this._getCustomTags(e))).bhvr&&(r.behavior=parseInt(function(e,t){var i;return e&&e[t]&&(i=e[t],delete e[t]),i}(a,"bhvr")))),sr(t.behavior)&&(r.behavior=t.behavior),sr(t.actionType)&&(r.actionType=t.actionType),sr(t.clickCoordinateX)&&sr(t.clickCoordinateY)&&(r.clickCoordinates=t.clickCoordinateX+"X"+t.clickCoordinateY),r.contentVer="2.0";var s=this._config.callback.pageActionContentTags;r.content=dr(JSON.stringify(Ie(a,"function"==typeof s?s(e):{},t&&t.contentTags?t.contentTags:{}))),o.timeToAction=this._getTimeToClick(),o.refUri=sr(t.refUri)?t.refUri:this._config.coreData.referrerUri;var c=Tr(this._config,this._traceLogger);c&&(o.cookies=c),this.trackPageAction(r,o)},Ur.prototype._getCustomTags=function(e){for(var t={};e;)if(!Sr(e)){for(var i in e.attributes)if(i&&e.attributes[i]){var n=e.attributes[i].name;n&&0===n.toLowerCase().indexOf("ms.")&&(t[n]=e.attributes[i].value)}e=e.parentElement||e.parentNode}return t},Ur.prototype._getTimeToClick=function(){if(window.performance&&window.performance.timing){var e=window.performance.timing.navigationStart;if(e&&0!==e)return(new Date).getTime()-e}return-1},Ur);function Ur(){return null!==Ar&&Ar.apply(this,arguments)||this}var Or,Rr=(Pe(Lr,Or=Nr),Lr.prototype.trackContentUpdate=function(e,t){var i={web:{}};i.web.isManual=e.isManual;var n={name:"Ms.Web.ContentUpdate",baseType:"ContentUpdateData",ext:i,data:{},baseData:{},latency:3};for(var r in n.baseData.name=e.name,n.baseData.uri=e.uri,n.baseData.market=e.market,n.baseData.pageType=e.pageType,n.baseData.isLoggedIn=e.isLoggedIn,n.baseData.id=e.id,n.baseData.properties=e.properties,n.baseData.ver=e.ver,n.baseData.actionType=e.actionType,n.baseData.behavior=e.behavior,n.baseData.pageHeight=e.pageHeight,n.baseData.content=e.content,n.baseData.contentVer=e.contentVer,n.baseData.vpHeight=e.vpHeight,n.baseData.vpWidth=e.vpWidth,n.baseData.vScrollOffset=e.vScrollOffset,n.baseData.hScrollOffset=e.hScrollOffset,t)t.hasOwnProperty(r)&&(n.data[r]||(n.data[r]=t[r]));this._webAnalyticsPlugin.core.track(n)},Lr.prototype.captureContentUpdate=function(e,t){e=sr(e)?e:{};var i={},n=sr(t)?t:{};this._setCommonProperties(i,n,e),i.behavior=this._getBehavior(e),sr(e.behavior)&&(i.behavior=e.behavior),sr(e.actionType)&&(i.actionType=e.actionType);var r=_r(),o=vr(),a=function(e){return{top:0,bottom:e.h,left:0,right:e.w}}(r);i.pageHeight=document.body.scrollHeight,i.vpHeight=r.h,i.vpWidth=r.w,i.vScrollOffset=o.v,i.hScrollOffset=o.h,i.contentVer="2.0",i.isManual=!e.isAuto;var s=this._getContentFormatted(e.content)||this._getPageContent(a,this._config,this._traceLogger);s&&(i.content=s),sr(e.isDomComplete)?n.isDomComplete=e.isDomComplete:n.isDomComplete=!1,this.trackContentUpdate(i,n)},Lr.prototype._getPageContent=function(e,t,i){var n=[],r=document.querySelectorAll(dr(this._contentBlobFieldNames.areaName)+","+dr(this._contentBlobFieldNames.slotNumber)+","+dr(t.biBlobAttributeTag));return this._pushToArrayOfContentsIfVisible(r,n,e,t,i),JSON.stringify(n)},Lr.prototype._getContentFormatted=function(e){if(sr(e))return"[object Array]"===Object.prototype.toString.call(e)?JSON.stringify(e):dr(JSON.stringify(e))},Lr.prototype._pushToArrayOfContentsIfVisible=function(e,t,i,n,r){if(e)for(var o=0;o<e.length;o++){var a=e[o];if(!hr(a,"data-bi-dnt")&&pr(a,i)){var s=this._getElementContent(a,!1,n,r);s&&t.push(s)}}},Lr);function Lr(){return null!==Or&&Or.apply(this,arguments)||this}var Vr,Br=(Pe(qr,Vr=Nr),qr.prototype.trackPageUnload=function(e,t){var i={web:{}};i.web.isManual=e.isManual;var n={name:"Ms.Web.PageUnload",baseType:"PageUnloadData",ext:i,data:{},baseData:{},latency:ie.RealTime};for(var r in n.baseData.name=e.name,n.baseData.uri=e.uri,n.baseData.id=e.id,n.baseData.properties=e.properties,n.baseData.ver=e.ver,n.baseData.market=e.market,n.baseData.pageType=e.pageType,n.baseData.isLoggedIn=e.isLoggedIn,t)t.hasOwnProperty(r)&&(n.data[r]||(n.data[r]=t[r]));this._webAnalyticsPlugin.core.track(n)},qr.prototype.capturePageUnload=function(e,t){e=sr(e)?e:{};var i={},n=sr(t)?t:{},r=document.body.scrollHeight;this._setBasicProperties(i,e),i.isManual=!e.isAuto,n.dwellTime=this._timestamp._recordTimeSpan("dwellTime",!0),n.scrollDepth=e.scrollDepth||this._maxScroll.v.toString()+"/"+r.toString(),n.vpHeight=_r().h,n.vScrollOffset=e.vScrollOffset||this._maxScroll.v;var o=window.performance?window.performance.timing:void 0;o&&o.loadEventStart&&o.navigationStart&&0<o.loadEventStart&&(n.pageLoadTime=o.loadEventStart-o.navigationStart),this.trackPageUnload(i,n)},qr);function qr(e,t,i,n,r,o){var a=Vr.call(this,e,t,i,{},{},n)||this;return a._webAnalyticsPlugin=e,a._config=t,a._id=i,a._traceLogger=n,a._timestamp=r,a._maxScroll=o,a}var zr,Fr=(Pe(Qr,zr=Nr),Qr.prototype.capturePageViewPerformance=function(e,t){e=sr(e)?e:{};var i={},n=sr(t)?t:{};this._setBasicProperties(i,e),i.isManual=!e.isAuto,n.behavior=this._getBehavior(e),n.vpHeight=e.vpHeight,n.vpWidth=e.vpWidth,n.framework=e.framework,n.systemTiming=e.systemTiming,n.customTiming=e.customTiming,this._webAnalyticsPlugin._populatePageViewPerformance(i),this._webAnalyticsPlugin.trackPageViewPerformance(i,n)},Qr);function Qr(){return null!==zr&&zr.apply(this,arguments)||this}var Wr=(Gr.prototype.createTraceId=function(){return Ce().replace(/-/g,"")},Gr.visitorId=function(){return Te("MUID")},Gr.prototype.getTraceId=function(){return this.traceId},Gr.prototype.getLastPageViewId=function(){return this.lastPageViewId},Gr.prototype.initializeIds=function(){this.firstPageView?(this.traceId=this.createTraceId(),this.lastPageViewId=Ce()):this.firstPageView=!0},Gr.prototype.getMuidUserId=function(){var e=Te("MUID");return e&&e.length?"t:"+e:e},Gr.prototype.setAppUserId=function(e){if(this.appUserId=null,e){for(var t=0;t<Gr.userIdPrefixes.length;t++)if(Gr.userIdPrefixes[t]===e.substring(0,2)){this.appUserId=e;break}this.appUserId}},Gr.prototype.setDeviceClass=function(e){e&&(this.deviceClass=e)},Gr.prototype.getDeviceClass=function(){return this.deviceClass},Gr.prototype.getAppUserId=function(){return this.appUserId},Gr.userIdPrefixes=["c:","i:","w:"],Gr);function Gr(){this.appUserId=null,this.firstPageView=!1,this.lastPageViewId=Ce(),this.traceId=this.createTraceId()}var Hr=(Kr.prototype._recordTimeSpan=function(e,t){var i=(new Date).getTime();if(t)return i-this._timers[e];this._timers[e]=i},Kr);function Kr(){this._timers=[]}var jr,Xr={BUTTON:!0,CHECKBOX:!0,RADIO:!0,RESET:!0,SUBMIT:!0},Jr=(Pe(Yr,jr=ir),Yr.prototype.updateCoreDataConfig=function(e){this._config.coreData=Ie(!0,this._config.coreData,e)},Yr.prototype._mergeConfig=function(e){var t={useDefaultContentName:!0,useShortNameForContentBlob:!0,debounceMs:{scroll:600,resize:3e3},biBlobAttributeTag:"data-m",isLoggedIn:!1,shareAuthStatus:!1,cookiesToCollect:["MSFPC","ANON"],autoCapture:{pageView:!0,onLoad:!0,onUnload:!0,click:!0,scroll:!1,resize:!1,lineage:!1,jsError:!0},callback:{pageName:null,pageActionPageTags:null,pageViewPageTags:null,contentUpdatePageTags:null,pageActionContentTags:null,signedinStatus:null},coreData:{referrerUri:document.referrer,requestUri:"",pageName:"",pageType:"",product:"",market:"",pageTags:{}}},i=[];for(var n in t)"object"==typeof t[n]&&i.push(n);if(e)return function(e,t){for(var i in ar(e),t)if(t.hasOwnProperty(i)){var n=t[i];"object"==typeof e[n]?ar(e[n]):delete e[n]}}(e,i),Ie(!0,t,e)},Yr.prototype._firstPartyInitialize=function(e,t,i){var n=this,r=t;e.extensionConfig=e.extensionConfig||[],e.extensionConfig[this.identifier]=e.extensionConfig[this.identifier]||{},this._config=this._mergeConfig(e.extensionConfig[this.identifier]);var o=r.getWParam;if(r.getWParam=function(){var e=0;return n._config.mscomCookies&&(e|=1),e|o()},this.baseInitialize(e,t,i),this._config.manageCv){for(var a=0;a<i.length;a++)if("CorrelationVectorPlugin"===i[a].identifier){this._config.manageCv=!0,this._cvPlugin=i[a];break}this._cvPlugin||(this._logger.warnToConsole('Automatic Cv management is set to "true" in config.  However, cv plugin is not available. Disabling automatic Cv management'),this._config.manageCv=!1)}this.id=new Wr,this._timespan=new Hr;var s=this._config.autoCapture,c=Ie(!0,wr("awa-",!0),wr("ms.",!1));if(this.pageView=new Pr(this,this._config,this.id,this._config.callback.pageViewPageTags,c,this._logger),this.pageAction=new Mr(this,this._config,this.id,this._config.callback.pageViewPageTags,c,this._logger),this.contentUpdate=new Rr(this,this._config,this.id,this._config.callback.pageViewPageTags,c,this._logger),this.pageUnload=new Br(this,this._config,this.id,this._logger,this._timespan,this._maxScroll),this.pageViewPerformance=new Fr(this,this._config,this.id,this._config.callback.pageViewPageTags,c,this._logger),this.config.disableExceptionTracking=!s.jsError,this._telemetryInitializers=[],s.pageView&&this.capturePageView({isAuto:!0}),s.onLoad&&this.onDomReadyDo(function(){n._config.autoCapture.onLoad&&("complete"===document.readyState?(n.capturePageViewPerformance({isAuto:!0}),n.captureContentUpdate({isAuto:!0,isDomComplete:!0})):window.addEventListener?window.addEventListener("load",function(){n.capturePageViewPerformance({isAuto:!0}),n.captureContentUpdate({isAuto:!0,isDomComplete:!0})}):window.attachEvent&&window.attachEvent("onload",function(){n.capturePageViewPerformance({isAuto:!0}),n.captureContentUpdate({isAuto:!0,isDomComplete:!0})}))}),s.click)if(window.addEventListener){var u=-1!==navigator.appVersion.indexOf("MSIE")?"click":"mousedown";window.addEventListener(u,function(e){n._processClick(e)},!1),window.addEventListener("keyup",function(e){n._processClick(e)},!1)}else document.attachEvent&&(document.attachEvent("onclick",function(e){n._processClick(e)}),document.attachEvent("keyup",function(e){n._processClick(e)}));if(s.scroll){var l=mr(null,function(){n.captureContentUpdate({isAuto:!0,actionType:Cr.SCROLL})},this._config.debounceMs.scroll,this);window.addEventListener?window.addEventListener("scroll",l):window.attachEvent&&window.attachEvent("onscroll",l)}if(s.resize){var p=mr(function(){n.captureContentUpdate({isAuto:!0,actionType:Cr.RESIZE})},null,this._config.debounceMs.resize,this);window.addEventListener?window.addEventListener("resize",p):window.attachEvent&&window.attachEvent("onresize",p)}if(s.onUnload||this._config.manualPageUnload){var h=this._maxScroll,f=function(){var e=vr();h.v=h.v>e.v?h.v:e.v};window.addEventListener?window.addEventListener("scroll",f):window.attachEvent&&window.attachEvent("onscroll",f)}s.onUnload&&(window.addEventListener?(window.addEventListener("beforeunload",function(){n.capturePageUnload({isAuto:!0})}),window.addEventListener("unload",function(){n.capturePageUnload({isAuto:!0})})):window.attachEvent&&(window.attachEvent("onbeforeunload",function(){n.capturePageUnload({isAuto:!0})}),window.attachEvent("onunload",function(){n.capturePageUnload({isAuto:!0})})))},Yr.prototype.processTelemetry=function(e){var t=e;"PageviewData"===t.baseType?(t.name="Ms.Web.PageView",t.latency=ie.RealTime):"ExceptionData"===t.baseType?(t.name="Ms.Web.ClientError",t.latency=ie.Normal,delete t.baseData.aiDataContract):"PageviewPerformanceData"===t.baseType&&(t.name="Ms.Web.PageViewPerformance",t.latency=ie.Normal,delete t.baseData.isValid,delete t.baseData.durationMs);var i=null;"PageviewData"!==t.baseType?this._config.manageCv&&(i=this._cvPlugin.getCv())&&i.increment():this._config.manageCv&&((i=this._cvPlugin.getCv())?i.seed():i=this._cvPlugin.getCv());for(var n=!1,r=this._telemetryInitializers.length,o=0;o<r;++o){var a=this._telemetryInitializers[o];if(a&&!1===a.apply(null,[t])){n=!0;break}}!n&&this._nextPlugin&&this._nextPlugin.processTelemetry(t)},Yr.prototype.setNextPlugin=function(e){this._nextPlugin=e},Yr.prototype.addTelemetryInitializer=function(e){this._telemetryInitializers.push(e)},Yr.prototype.trackEvent=function(e,t){var i=_n.create(e,gi.dataType,gi.envelopeType,this._logger,t),n=i;n.latency=e.latency||ie.Normal,n.name=e.name,this.core.track(i)},Yr.prototype.trackPageView=function(e,t){this._resetPageUnloadProperties(),this.id.initializeIds(),e.id=this.id.getLastPageViewId(),jr.prototype.sendPageViewInternal.call(this,e,t,this._getSystemProperties(e))},Yr.prototype.capturePageView=function(e,t){this.pageView.capturePageView(e,t)},Yr.prototype.trackPageViewPerformance=function(e,t){jr.prototype.sendPageViewPerformanceInternal.call(this,e,t,this._getSystemProperties(e))},Yr.prototype.capturePageViewPerformance=function(e,t){this.pageViewPerformance.capturePageViewPerformance(e,t)},Yr.prototype.trackException=function(e,t){e.id=e.id||Ce(),jr.prototype.sendExceptionInternal.call(this,e,t,this._getSystemProperties(e))},Yr.prototype.trackPageAction=function(e,t){this.pageAction.trackPageAction(e,t)},Yr.prototype.capturePageAction=function(e,t,i,n){hr(e,"data-bi-dnt")||this.pageAction.capturePageAction(e,t,i,n)},Yr.prototype.trackContentUpdate=function(e,t){this.contentUpdate.trackContentUpdate(e,t)},Yr.prototype.captureContentUpdate=function(e,t){this.contentUpdate.captureContentUpdate(e,t)},Yr.prototype.trackPageUnload=function(e,t){this._isPageUnloadFired||(this._isPageUnloadFired=!0,this.pageUnload.trackPageUnload(e,t))},Yr.prototype.capturePageUnload=function(e,t){this._isPageUnloadFired||(this._isPageUnloadFired=!0,this.pageUnload.capturePageUnload(e,t))},Yr.prototype._populatePageViewPerformance=function(e){this._pageViewPerformanceManager.populatePageViewPerformanceEvent(e)},Yr.prototype._processClick=function(e){var t={A:!0,BUTTON:!0,AREA:!0,INPUT:!0},i=(e=e||window.event).srcElement||e.target,n={isAuto:!0,clickCoordinateX:e.pageX,clickCoordinateY:e.pageY},r=function(e){return"which"in e?3===e.which:"button"in e?2===e.button:void 0}(e);if(r)n.actionType=Cr.CLICKRIGHT;else if(function(e){return"which"in e?1===e.which:"button"in e?1===e.button:void 0}(e))n.actionType=Cr.CLICKLEFT;else if(function(e){if("keyCode"in e)return 13===e.keyCode}(e))n.actionType=Cr.KEYBOARDENTER;else if(function(e){if("keyCode"in e)return 32===e.keyCode}(e))n.actionType=Cr.KEYBOARDSPACE;else{if(!function(e){return"which"in e?2===e.which:"button"in e?4===e.button:void 0}(e))return;n.actionType=Cr.CLICKMIDDLE}for(;i&&i.tagName;){if(i.control&&t[i.control.tagName.toUpperCase()]&&(i=i.control),t[i.tagName.toUpperCase()]){"INPUT"===i.tagName.toUpperCase()&&!Xr[i.type.toUpperCase()]||this.capturePageAction(i,n,{},r);break}i=i.parentElement||i.parentNode}},Yr.prototype._getSystemProperties=function(e){var t={};return void 0!==e.isManual&&(t.web={},t.web.isManual=void 0===e.isManual||e.isManual,delete e.isManual),t},Yr.prototype._resetPageUnloadProperties=function(){this._timespan._recordTimeSpan("dwellTime",!1),this._maxScroll.v=0,this._isPageUnloadFired=!1},Yr.prototype.onDomReadyDo=function(e){var t=this;/in/.test(document.readyState)?setTimeout(function(){t.onDomReadyDo(e)},100):e.call()},Yr);function Yr(){var e=jr.call(this)||this;return e.identifier="WebAnalyticsPlugin",e.version="2.0.1",e._maxScroll={h:0,v:0},e._isPageUnloadFired=!1,e.baseInitialize=e.initialize,e.initialize=e._firstPartyInitialize.bind(e),e}var Zr,$r=(Pe(eo,Zr=Me),eo.prototype.initialize=function(e,t){var i=[this._propertyManager,this._webAnalytics];if(t&&(i=i.concat(t)),e.channels&&0<e.channels.length){for(var n=!1,r=0;r<e.channels[0].length;r++)if(e.channels[0][r].identifier===this._postChannel.identifier){n=!0;break}n||e.channels[0].push(this._postChannel)}else e.channels=[[this._postChannel]];e.extensionConfig=e.extensionConfig||[],e.extensionConfig[this._postChannel.identifier]=e?e.channelConfiguration:{},e.extensionConfig[this._propertyManager.identifier]=e?e.propertyConfiguration:{},e.extensionConfig[this._webAnalytics.identifier]=e?e.webAnalyticsConfiguration:{};try{Zr.prototype.initialize.call(this,e,i)}catch(e){this.logger.warnToConsole("Channels must be provided through config.channels only")}},eo.prototype.getPropertyManager=function(){return this._propertyManager},eo.prototype.getPostChannel=function(){return this._postChannel},eo.prototype.addTelemetryInitializer=function(e){this._webAnalytics.addTelemetryInitializer(e)},eo.prototype.trackEvent=function(e,t){this._webAnalytics.trackEvent(e,t)},eo.prototype.trackPageView=function(e,t){this._webAnalytics.trackPageView(e,t)},eo.prototype.trackPageAction=function(e,t){this._webAnalytics.trackPageAction(e,t)},eo.prototype.trackContentUpdate=function(e,t){this._webAnalytics.trackContentUpdate(e,t)},eo.prototype.trackPageUnload=function(e,t){this._webAnalytics.trackPageUnload(e,t)},eo.prototype.trackException=function(e,t){this._webAnalytics.trackException(e,t)},eo.prototype.trackPageViewPerformance=function(e,t){this._webAnalytics.trackPageViewPerformance(e,t)},eo.prototype.capturePageView=function(e,t){this._webAnalytics.capturePageView(e,t)},eo.prototype.capturePageViewPerformance=function(e,t){this._webAnalytics.capturePageViewPerformance(e,t)},eo.prototype.capturePageAction=function(e,t,i,n){this._webAnalytics.capturePageAction(e,t,i,n)},eo.prototype.captureContentUpdate=function(e,t){this._webAnalytics.captureContentUpdate(e,t)},eo.prototype.capturePageUnload=function(e,t){this._webAnalytics.capturePageUnload(e,t)},eo.prototype._onerror=function(e){this._webAnalytics._onerror(e)},eo.prototype.emptySnippetQueue=function(e){try{if(ye(e.queue)){for(var t=e.queue.length,i=0;i<t;i++)(0,e.queue[i])();e.queue=void 0,delete e.queue}}catch(e){var n={};e&&"function"==typeof e.toString&&(n.exception=e.toString())}},eo.prototype.updateSnippetDefinitions=function(e){for(var t in this)"string"==typeof t&&(e[t]=this[t])},eo);function eo(){var e=Zr.call(this)||this;return e._postChannel=new Hn,e._propertyManager=new kn,e._webAnalytics=new Jr,e}try{var to;if("undefined"!=typeof window&&"undefined"!=typeof JSON&&(to=window.onedsSDK||"oneDSWeb",void 0!==window[to])){var io=window[to],no=new $r;no.updateSnippetDefinitions(io),no.initialize(io.config,io.extensions),(window[to]=no).emptySnippetQueue(io)}}catch(e){console&&console.warn("Failed to initialize AppInsights JS SDK for instance "+to+e.message)}e.ApplicationInsights=$r,e.MinChannelPriorty=100,e.ValueKind={NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,CustomerContent_GenericContent:32},e.Utils=ke,e.EventLatency=ie,e.EventPersistence={Normal:1,Critical:2},e.TraceLevel={NONE:0,ERROR:1,WARNING:2,INFORMATION:3},e.NotificationManager=f,e.PropertiesPlugin=kn,e.PostChannel=Hn,e.Serializer=Mn,e.CoreUtils=l,e.BE_PROFILE=An,e.NRT_PROFILE=Dn,e.RT_PROFILE=Pn,e.EventsDiscardedReason=h,e.DiagnosticLogger=H,e.ActionType=Cr,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ms.analytics-web-2.0.1.min.js.map
